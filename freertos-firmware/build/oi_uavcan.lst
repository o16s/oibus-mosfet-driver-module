ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"oi_uavcan.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.readUniqueID,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv4-sp-d16
  24              	readUniqueID:
  25              	.LFB132:
  26              		.file 1 "Src/oi_uavcan.c"
   1:Src/oi_uavcan.c **** #include "oi_uavcan.h"
   2:Src/oi_uavcan.c **** #include <canard.h>
   3:Src/oi_uavcan.c **** #include <canard_stm32.h>
   4:Src/oi_uavcan.c **** #include <cmsis_os.h>
   5:Src/oi_uavcan.c **** #include "stm32f3xx_hal.h"
   6:Src/oi_uavcan.c **** #include "gpio.h"
   7:Src/oi_uavcan.c **** 
   8:Src/oi_uavcan.c **** 
   9:Src/oi_uavcan.c **** 
  10:Src/oi_uavcan.c **** /**********
  11:Src/oi_uavcan.c ****  private variables
  12:Src/oi_uavcan.c ****  **********/
  13:Src/oi_uavcan.c **** static uint8_t node_health = UAVCAN_NODE_HEALTH_OK;
  14:Src/oi_uavcan.c **** static uint8_t node_mode   = UAVCAN_NODE_MODE_INITIALIZATION;
  15:Src/oi_uavcan.c **** 
  16:Src/oi_uavcan.c **** static CanardInstance g_canard;             // The library instance
  17:Src/oi_uavcan.c **** static uint8_t g_canard_memory_pool[1024];  // Arena for memory allocation, used by the library
  18:Src/oi_uavcan.c **** static uint32_t g_uptime = 0;
  19:Src/oi_uavcan.c **** 
  20:Src/oi_uavcan.c **** static param_t parameters[] =
  21:Src/oi_uavcan.c **** {
  22:Src/oi_uavcan.c **** 	    {"drivers", 0, 0b0000000000, 0b1111111111, 0b0000000000}
  23:Src/oi_uavcan.c **** };
  24:Src/oi_uavcan.c **** 
  25:Src/oi_uavcan.c **** 
  26:Src/oi_uavcan.c **** 
  27:Src/oi_uavcan.c **** /**********
  28:Src/oi_uavcan.c ****  private functions
  29:Src/oi_uavcan.c ****  **********/
  30:Src/oi_uavcan.c **** 
  31:Src/oi_uavcan.c **** //helpers
  32:Src/oi_uavcan.c **** static void readUniqueID(uint8_t* out_uid)
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 2


  33:Src/oi_uavcan.c **** {
  27              		.loc 1 33 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  32              	.LVL0:
  33              	.LBB2:
  34:Src/oi_uavcan.c ****    for (uint8_t i = 0; i < UNIQUE_ID_LENGTH_BYTES; i++)
  34              		.loc 1 34 0
  35 0000 0023     		movs	r3, #0
  36 0002 02E0     		b	.L2
  37              	.LVL1:
  38              	.L3:
  35:Src/oi_uavcan.c ****    {
  36:Src/oi_uavcan.c ****        out_uid[i] = i;
  39              		.loc 1 36 0 discriminator 3
  40 0004 C354     		strb	r3, [r0, r3]
  34:Src/oi_uavcan.c ****    for (uint8_t i = 0; i < UNIQUE_ID_LENGTH_BYTES; i++)
  41              		.loc 1 34 0 discriminator 3
  42 0006 0133     		adds	r3, r3, #1
  43              	.LVL2:
  44 0008 DBB2     		uxtb	r3, r3
  45              	.LVL3:
  46              	.L2:
  34:Src/oi_uavcan.c ****    for (uint8_t i = 0; i < UNIQUE_ID_LENGTH_BYTES; i++)
  47              		.loc 1 34 0 is_stmt 0 discriminator 1
  48 000a 0F2B     		cmp	r3, #15
  49 000c FAD9     		bls	.L3
  50              	.LBE2:
  37:Src/oi_uavcan.c ****    }
  38:Src/oi_uavcan.c **** }
  51              		.loc 1 38 0 is_stmt 1
  52 000e 7047     		bx	lr
  53              		.cfi_endproc
  54              	.LFE132:
  56              		.section	.text.shouldAcceptTransfer,"ax",%progbits
  57              		.align	1
  58              		.syntax unified
  59              		.thumb
  60              		.thumb_func
  61              		.fpu fpv4-sp-d16
  63              	shouldAcceptTransfer:
  64              	.LFB138:
  39:Src/oi_uavcan.c **** 
  40:Src/oi_uavcan.c **** static void makeNodeStatusMessage(uint8_t buffer[UAVCAN_NODE_STATUS_MESSAGE_SIZE])
  41:Src/oi_uavcan.c **** {
  42:Src/oi_uavcan.c ****     const uint8_t node_health = UAVCAN_NODE_HEALTH_OK;
  43:Src/oi_uavcan.c ****     const uint8_t node_mode   = UAVCAN_NODE_MODE_OPERATIONAL;
  44:Src/oi_uavcan.c ****     memset(buffer, 0, UAVCAN_NODE_STATUS_MESSAGE_SIZE);
  45:Src/oi_uavcan.c ****     const uint32_t uptime_sec = g_uptime / 1000;
  46:Src/oi_uavcan.c ****     canardEncodeScalar(buffer,  0, 32, &uptime_sec);
  47:Src/oi_uavcan.c ****     canardEncodeScalar(buffer, 32,  2, &node_health);
  48:Src/oi_uavcan.c ****     canardEncodeScalar(buffer, 34,  3, &node_mode);
  49:Src/oi_uavcan.c **** }
  50:Src/oi_uavcan.c **** 
  51:Src/oi_uavcan.c **** static uint16_t makeNodeInfoMessage(uint8_t buffer[UAVCAN_GET_NODE_INFO_RESPONSE_MAX_SIZE])
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 3


  52:Src/oi_uavcan.c **** {
  53:Src/oi_uavcan.c ****     memset(buffer, 0, UAVCAN_GET_NODE_INFO_RESPONSE_MAX_SIZE);
  54:Src/oi_uavcan.c ****     makeNodeStatusMessage(buffer);
  55:Src/oi_uavcan.c **** 
  56:Src/oi_uavcan.c ****     buffer[7] = APP_VERSION_MAJOR;
  57:Src/oi_uavcan.c ****     buffer[8] = APP_VERSION_MINOR;
  58:Src/oi_uavcan.c ****     buffer[9] = 1;  // Optional field flags, VCS commit is set
  59:Src/oi_uavcan.c ****     const uint32_t git_hash = FIRMWARE_GIT_HASH;
  60:Src/oi_uavcan.c ****     canardEncodeScalar(buffer, 80, 32, &git_hash);
  61:Src/oi_uavcan.c **** 
  62:Src/oi_uavcan.c ****     readUniqueID(&buffer[24]);
  63:Src/oi_uavcan.c ****     const size_t name_len = strlen(APP_NODE_NAME);
  64:Src/oi_uavcan.c ****     memcpy(&buffer[41], APP_NODE_NAME, name_len);
  65:Src/oi_uavcan.c ****     return 41 + name_len ;
  66:Src/oi_uavcan.c **** }
  67:Src/oi_uavcan.c **** 
  68:Src/oi_uavcan.c **** static void getNodeInfoHandleCanard(CanardRxTransfer* transfer)
  69:Src/oi_uavcan.c **** {
  70:Src/oi_uavcan.c ****     uint8_t buffer[UAVCAN_GET_NODE_INFO_RESPONSE_MAX_SIZE];
  71:Src/oi_uavcan.c ****     memset(buffer, 0, UAVCAN_GET_NODE_INFO_RESPONSE_MAX_SIZE);
  72:Src/oi_uavcan.c ****     const uint16_t len = makeNodeInfoMessage(buffer);
  73:Src/oi_uavcan.c ****     int result = canardRequestOrRespond(&g_canard,
  74:Src/oi_uavcan.c ****                                         transfer->source_node_id,
  75:Src/oi_uavcan.c ****                                         UAVCAN_GET_NODE_INFO_DATA_TYPE_SIGNATURE,
  76:Src/oi_uavcan.c ****                                         UAVCAN_GET_NODE_INFO_DATA_TYPE_ID,
  77:Src/oi_uavcan.c ****                                         &transfer->transfer_id,
  78:Src/oi_uavcan.c ****                                         transfer->priority,
  79:Src/oi_uavcan.c ****                                         CanardResponse,
  80:Src/oi_uavcan.c ****                                         &buffer[0],
  81:Src/oi_uavcan.c ****                                         (uint16_t)len);
  82:Src/oi_uavcan.c ****     if (result < 0)
  83:Src/oi_uavcan.c ****     {
  84:Src/oi_uavcan.c ****         // TODO: handle the error
  85:Src/oi_uavcan.c ****     }
  86:Src/oi_uavcan.c **** }
  87:Src/oi_uavcan.c **** 
  88:Src/oi_uavcan.c **** 
  89:Src/oi_uavcan.c **** static uint16_t encodeParamCanard(param_t * p, uint8_t * buffer)
  90:Src/oi_uavcan.c **** {
  91:Src/oi_uavcan.c ****     uint8_t n     = 0;
  92:Src/oi_uavcan.c ****     int offset    = 0;
  93:Src/oi_uavcan.c ****     uint8_t tag   = 1;
  94:Src/oi_uavcan.c **** 
  95:Src/oi_uavcan.c ****     if (p == NULL)
  96:Src/oi_uavcan.c ****     {
  97:Src/oi_uavcan.c ****         tag = 0;
  98:Src/oi_uavcan.c ****         canardEncodeScalar(buffer, offset, 5, &n);
  99:Src/oi_uavcan.c ****         offset += 5;
 100:Src/oi_uavcan.c ****         canardEncodeScalar(buffer, offset,3, &tag);
 101:Src/oi_uavcan.c ****         offset += 3;
 102:Src/oi_uavcan.c **** 
 103:Src/oi_uavcan.c ****         canardEncodeScalar(buffer, offset, 6, &n);
 104:Src/oi_uavcan.c ****         offset += 6;
 105:Src/oi_uavcan.c ****         canardEncodeScalar(buffer, offset,2, &tag);
 106:Src/oi_uavcan.c ****         offset += 2;
 107:Src/oi_uavcan.c **** 
 108:Src/oi_uavcan.c ****         canardEncodeScalar(buffer, offset, 6, &n);
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 4


 109:Src/oi_uavcan.c ****         offset += 6;
 110:Src/oi_uavcan.c ****         canardEncodeScalar(buffer, offset, 2, &tag);
 111:Src/oi_uavcan.c ****         offset += 2;
 112:Src/oi_uavcan.c ****         buffer[offset / 8] = 0;
 113:Src/oi_uavcan.c ****         return ( offset / 8 + 1 );
 114:Src/oi_uavcan.c ****     }
 115:Src/oi_uavcan.c **** 
 116:Src/oi_uavcan.c ****     canardEncodeScalar(buffer, offset, 5,&n);
 117:Src/oi_uavcan.c ****     offset += 5;
 118:Src/oi_uavcan.c ****     canardEncodeScalar(buffer, offset, 3, &tag);
 119:Src/oi_uavcan.c ****     offset += 3;
 120:Src/oi_uavcan.c ****     canardEncodeScalar(buffer, offset, 64, &p->val);
 121:Src/oi_uavcan.c ****     offset += 64;
 122:Src/oi_uavcan.c **** 
 123:Src/oi_uavcan.c ****     canardEncodeScalar(buffer, offset, 5, &n);
 124:Src/oi_uavcan.c ****     offset += 5;
 125:Src/oi_uavcan.c ****     canardEncodeScalar(buffer, offset, 3, &tag);
 126:Src/oi_uavcan.c ****     offset += 3;
 127:Src/oi_uavcan.c ****     canardEncodeScalar(buffer, offset, 64, &p->defval);
 128:Src/oi_uavcan.c ****     offset += 64;
 129:Src/oi_uavcan.c **** 
 130:Src/oi_uavcan.c ****     canardEncodeScalar(buffer, offset, 6, &n);
 131:Src/oi_uavcan.c ****     offset += 6;
 132:Src/oi_uavcan.c ****     canardEncodeScalar(buffer, offset, 2, &tag);
 133:Src/oi_uavcan.c ****     offset += 2;
 134:Src/oi_uavcan.c ****     canardEncodeScalar(buffer, offset, 64, &p->max);
 135:Src/oi_uavcan.c ****     offset += 64;
 136:Src/oi_uavcan.c **** 
 137:Src/oi_uavcan.c ****     canardEncodeScalar(buffer, offset, 6, &n);
 138:Src/oi_uavcan.c ****     offset += 6;
 139:Src/oi_uavcan.c ****     canardEncodeScalar(buffer, offset,2,&tag);
 140:Src/oi_uavcan.c ****     offset += 2;
 141:Src/oi_uavcan.c ****     canardEncodeScalar(buffer, offset,64,&p->min);
 142:Src/oi_uavcan.c ****     offset += 64;
 143:Src/oi_uavcan.c **** 
 144:Src/oi_uavcan.c ****     memcpy(&buffer[offset / 8], p->name, strlen((char const*)p->name));
 145:Src/oi_uavcan.c ****     /* See important note below */
 146:Src/oi_uavcan.c ****     return  (offset/8 + strlen((char const*)p->name));
 147:Src/oi_uavcan.c **** 
 148:Src/oi_uavcan.c **** }
 149:Src/oi_uavcan.c **** 
 150:Src/oi_uavcan.c **** static void getsetHandleCanard(CanardRxTransfer* transfer){
 151:Src/oi_uavcan.c **** 
 152:Src/oi_uavcan.c ****     uint16_t index = 0xFFFF;
 153:Src/oi_uavcan.c ****     uint8_t tag    = 0;
 154:Src/oi_uavcan.c ****     int offset     = 0;
 155:Src/oi_uavcan.c ****     int64_t val    = 0;
 156:Src/oi_uavcan.c **** 
 157:Src/oi_uavcan.c ****     canardDecodeScalar(transfer, offset,  13, false, &index);
 158:Src/oi_uavcan.c ****     offset += 13;
 159:Src/oi_uavcan.c ****     canardDecodeScalar(transfer, offset, 3, false, &tag);
 160:Src/oi_uavcan.c ****     offset += 3;
 161:Src/oi_uavcan.c **** 
 162:Src/oi_uavcan.c ****     if (tag == 1)
 163:Src/oi_uavcan.c ****     {
 164:Src/oi_uavcan.c ****         canardDecodeScalar(transfer, offset, 64, false, &val);
 165:Src/oi_uavcan.c ****         offset += 64;
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 5


 166:Src/oi_uavcan.c ****     }
 167:Src/oi_uavcan.c **** 
 168:Src/oi_uavcan.c ****     uint16_t n = transfer->payload_len - offset / 8 ;
 169:Src/oi_uavcan.c ****     uint8_t name[16] = "";
 170:Src/oi_uavcan.c ****     for (int i = 0; i < n; i++)
 171:Src/oi_uavcan.c ****     {
 172:Src/oi_uavcan.c ****         canardDecodeScalar(transfer, offset, 8, false, &name[i]);
 173:Src/oi_uavcan.c ****         offset += 8;
 174:Src/oi_uavcan.c ****     }
 175:Src/oi_uavcan.c **** 
 176:Src/oi_uavcan.c ****     param_t* p = NULL;
 177:Src/oi_uavcan.c **** 
 178:Src/oi_uavcan.c ****     if (strlen((char const*)name))
 179:Src/oi_uavcan.c ****     {
 180:Src/oi_uavcan.c ****         p = oi_uavcan_getParamByName(name);
 181:Src/oi_uavcan.c ****     }
 182:Src/oi_uavcan.c ****     else
 183:Src/oi_uavcan.c ****     {
 184:Src/oi_uavcan.c ****         p = oi_uavcan_getParamByIndex(index);
 185:Src/oi_uavcan.c ****     }
 186:Src/oi_uavcan.c **** 
 187:Src/oi_uavcan.c ****     if ((p)&&(tag == 1))
 188:Src/oi_uavcan.c ****     {
 189:Src/oi_uavcan.c ****         p->val = val;
 190:Src/oi_uavcan.c ****     }
 191:Src/oi_uavcan.c **** 
 192:Src/oi_uavcan.c ****     uint8_t  buffer[64] = "";
 193:Src/oi_uavcan.c ****     uint16_t len = encodeParamCanard(p, buffer);
 194:Src/oi_uavcan.c ****     int result = canardRequestOrRespond(&g_canard,
 195:Src/oi_uavcan.c ****                                         transfer->source_node_id,
 196:Src/oi_uavcan.c ****                                         UAVCAN_PROTOCOL_PARAM_GETSET_SIGNATURE,
 197:Src/oi_uavcan.c ****                                         UAVCAN_PROTOCOL_PARAM_GETSET_ID,
 198:Src/oi_uavcan.c ****                                         &transfer->transfer_id,
 199:Src/oi_uavcan.c ****                                         transfer->priority,
 200:Src/oi_uavcan.c ****                                         CanardResponse,
 201:Src/oi_uavcan.c ****                                         &buffer[0],
 202:Src/oi_uavcan.c ****                                         (uint16_t)len);
 203:Src/oi_uavcan.c **** 
 204:Src/oi_uavcan.c **** 
 205:Src/oi_uavcan.c **** 
 206:Src/oi_uavcan.c **** 
 207:Src/oi_uavcan.c **** 
 208:Src/oi_uavcan.c **** }
 209:Src/oi_uavcan.c **** 
 210:Src/oi_uavcan.c **** 
 211:Src/oi_uavcan.c **** //main functions
 212:Src/oi_uavcan.c **** static bool shouldAcceptTransfer(const CanardInstance* ins,
 213:Src/oi_uavcan.c ****                          uint64_t* out_data_type_signature,
 214:Src/oi_uavcan.c ****                          uint16_t data_type_id,
 215:Src/oi_uavcan.c ****                          CanardTransferType transfer_type,
 216:Src/oi_uavcan.c ****                          uint8_t source_node_id)
 217:Src/oi_uavcan.c **** {
  65              		.loc 1 217 0
  66              		.cfi_startproc
  67              		@ args = 4, pretend = 0, frame = 0
  68              		@ frame_needed = 0, uses_anonymous_args = 0
  69              		@ link register save eliminated.
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 6


  70              	.LVL4:
 218:Src/oi_uavcan.c ****    if ((transfer_type == CanardTransferTypeRequest) &&
  71              		.loc 1 218 0
  72 0000 012B     		cmp	r3, #1
  73 0002 03D0     		beq	.L9
  74              	.L5:
 219:Src/oi_uavcan.c ****        (data_type_id == UAVCAN_GET_NODE_INFO_DATA_TYPE_ID))
 220:Src/oi_uavcan.c ****    {
 221:Src/oi_uavcan.c ****        *out_data_type_signature = UAVCAN_GET_NODE_INFO_DATA_TYPE_SIGNATURE;
 222:Src/oi_uavcan.c ****        return true;
 223:Src/oi_uavcan.c ****    }
 224:Src/oi_uavcan.c **** 
 225:Src/oi_uavcan.c ****    if ((transfer_type == CanardTransferTypeRequest) &&
  75              		.loc 1 225 0
  76 0004 012B     		cmp	r3, #1
  77 0006 0AD0     		beq	.L10
 226:Src/oi_uavcan.c ****        (data_type_id ==  UAVCAN_PROTOCOL_PARAM_GETSET_ID))
 227:Src/oi_uavcan.c ****    {
 228:Src/oi_uavcan.c ****        *out_data_type_signature =  UAVCAN_PROTOCOL_PARAM_GETSET_SIGNATURE;
 229:Src/oi_uavcan.c ****        return true;
 230:Src/oi_uavcan.c ****    }
 231:Src/oi_uavcan.c **** 
 232:Src/oi_uavcan.c ****    return false;
  78              		.loc 1 232 0
  79 0008 0020     		movs	r0, #0
  80              	.LVL5:
  81 000a 7047     		bx	lr
  82              	.LVL6:
  83              	.L9:
 218:Src/oi_uavcan.c ****        (data_type_id == UAVCAN_GET_NODE_INFO_DATA_TYPE_ID))
  84              		.loc 1 218 0 discriminator 1
  85 000c 012A     		cmp	r2, #1
  86 000e F9D1     		bne	.L5
 221:Src/oi_uavcan.c ****        return true;
  87              		.loc 1 221 0
  88 0010 09A3     		adr	r3, .L12
  89 0012 D3E90023 		ldrd	r2, [r3]
  90              	.LVL7:
  91 0016 C1E90023 		strd	r2, [r1]
 222:Src/oi_uavcan.c ****    }
  92              		.loc 1 222 0
  93 001a 0120     		movs	r0, #1
  94              	.LVL8:
  95 001c 7047     		bx	lr
  96              	.LVL9:
  97              	.L10:
 225:Src/oi_uavcan.c ****        (data_type_id ==  UAVCAN_PROTOCOL_PARAM_GETSET_ID))
  98              		.loc 1 225 0 discriminator 1
  99 001e 0B2A     		cmp	r2, #11
 100 0020 01D0     		beq	.L11
 101              		.loc 1 232 0
 102 0022 0020     		movs	r0, #0
 103              	.LVL10:
 233:Src/oi_uavcan.c **** }
 104              		.loc 1 233 0
 105 0024 7047     		bx	lr
 106              	.LVL11:
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 7


 107              	.L11:
 228:Src/oi_uavcan.c ****        return true;
 108              		.loc 1 228 0
 109 0026 06A3     		adr	r3, .L12+8
 110 0028 D3E90023 		ldrd	r2, [r3]
 111              	.LVL12:
 112 002c C1E90023 		strd	r2, [r1]
 229:Src/oi_uavcan.c ****    }
 113              		.loc 1 229 0
 114 0030 0120     		movs	r0, #1
 115              	.LVL13:
 116 0032 7047     		bx	lr
 117              	.L13:
 118 0034 AFF30080 		.align	3
 119              	.L12:
 120 0038 9E6AC421 		.word	566520478
 121 003c 818A46EE 		.word	-297366911
 122 0040 D5A4D139 		.word	970040533
 123 0044 F922B6A7 		.word	-1481235719
 124              		.cfi_endproc
 125              	.LFE138:
 127              		.section	.text.makeNodeStatusMessage,"ax",%progbits
 128              		.align	1
 129              		.syntax unified
 130              		.thumb
 131              		.thumb_func
 132              		.fpu fpv4-sp-d16
 134              	makeNodeStatusMessage:
 135              	.LFB133:
  41:Src/oi_uavcan.c ****     const uint8_t node_health = UAVCAN_NODE_HEALTH_OK;
 136              		.loc 1 41 0
 137              		.cfi_startproc
 138              		@ args = 0, pretend = 0, frame = 8
 139              		@ frame_needed = 0, uses_anonymous_args = 0
 140              	.LVL14:
 141 0000 10B5     		push	{r4, lr}
 142              	.LCFI0:
 143              		.cfi_def_cfa_offset 8
 144              		.cfi_offset 4, -8
 145              		.cfi_offset 14, -4
 146 0002 82B0     		sub	sp, sp, #8
 147              	.LCFI1:
 148              		.cfi_def_cfa_offset 16
 149 0004 0446     		mov	r4, r0
  42:Src/oi_uavcan.c ****     const uint8_t node_mode   = UAVCAN_NODE_MODE_OPERATIONAL;
 150              		.loc 1 42 0
 151 0006 0021     		movs	r1, #0
 152 0008 8DF80710 		strb	r1, [sp, #7]
  43:Src/oi_uavcan.c ****     memset(buffer, 0, UAVCAN_NODE_STATUS_MESSAGE_SIZE);
 153              		.loc 1 43 0
 154 000c 8DF80610 		strb	r1, [sp, #6]
  44:Src/oi_uavcan.c ****     const uint32_t uptime_sec = g_uptime / 1000;
 155              		.loc 1 44 0
 156 0010 0160     		str	r1, [r0]	@ unaligned
 157 0012 C0F80310 		str	r1, [r0, #3]	@ unaligned
  45:Src/oi_uavcan.c ****     canardEncodeScalar(buffer,  0, 32, &uptime_sec);
 158              		.loc 1 45 0
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 8


 159 0016 0E4B     		ldr	r3, .L16
 160 0018 1A68     		ldr	r2, [r3]
 161 001a 0E4B     		ldr	r3, .L16+4
 162 001c A3FB0232 		umull	r3, r2, r3, r2
 163 0020 9209     		lsrs	r2, r2, #6
 164 0022 02AB     		add	r3, sp, #8
 165 0024 43F8082D 		str	r2, [r3, #-8]!
  46:Src/oi_uavcan.c ****     canardEncodeScalar(buffer, 32,  2, &node_health);
 166              		.loc 1 46 0
 167 0028 2022     		movs	r2, #32
 168 002a FFF7FEFF 		bl	canardEncodeScalar
 169              	.LVL15:
  47:Src/oi_uavcan.c ****     canardEncodeScalar(buffer, 34,  3, &node_mode);
 170              		.loc 1 47 0
 171 002e 0DF10703 		add	r3, sp, #7
 172 0032 0222     		movs	r2, #2
 173 0034 2021     		movs	r1, #32
 174 0036 2046     		mov	r0, r4
 175 0038 FFF7FEFF 		bl	canardEncodeScalar
 176              	.LVL16:
  48:Src/oi_uavcan.c **** }
 177              		.loc 1 48 0
 178 003c 0DF10603 		add	r3, sp, #6
 179 0040 0322     		movs	r2, #3
 180 0042 2221     		movs	r1, #34
 181 0044 2046     		mov	r0, r4
 182 0046 FFF7FEFF 		bl	canardEncodeScalar
 183              	.LVL17:
  49:Src/oi_uavcan.c **** 
 184              		.loc 1 49 0
 185 004a 02B0     		add	sp, sp, #8
 186              	.LCFI2:
 187              		.cfi_def_cfa_offset 8
 188              		@ sp needed
 189 004c 10BD     		pop	{r4, pc}
 190              	.LVL18:
 191              	.L17:
 192 004e 00BF     		.align	2
 193              	.L16:
 194 0050 00000000 		.word	.LANCHOR0
 195 0054 D34D6210 		.word	274877907
 196              		.cfi_endproc
 197              	.LFE133:
 199              		.section	.text.makeNodeInfoMessage,"ax",%progbits
 200              		.align	1
 201              		.syntax unified
 202              		.thumb
 203              		.thumb_func
 204              		.fpu fpv4-sp-d16
 206              	makeNodeInfoMessage:
 207              	.LFB134:
  52:Src/oi_uavcan.c ****     memset(buffer, 0, UAVCAN_GET_NODE_INFO_RESPONSE_MAX_SIZE);
 208              		.loc 1 52 0
 209              		.cfi_startproc
 210              		@ args = 0, pretend = 0, frame = 8
 211              		@ frame_needed = 0, uses_anonymous_args = 0
 212              	.LVL19:
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 9


 213 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 214              	.LCFI3:
 215              		.cfi_def_cfa_offset 20
 216              		.cfi_offset 4, -20
 217              		.cfi_offset 5, -16
 218              		.cfi_offset 6, -12
 219              		.cfi_offset 7, -8
 220              		.cfi_offset 14, -4
 221 0002 83B0     		sub	sp, sp, #12
 222              	.LCFI4:
 223              		.cfi_def_cfa_offset 32
 224 0004 0446     		mov	r4, r0
  53:Src/oi_uavcan.c ****     makeNodeStatusMessage(buffer);
 225              		.loc 1 53 0
 226 0006 40F27912 		movw	r2, #377
 227 000a 0021     		movs	r1, #0
 228 000c FFF7FEFF 		bl	memset
 229              	.LVL20:
  54:Src/oi_uavcan.c **** 
 230              		.loc 1 54 0
 231 0010 2046     		mov	r0, r4
 232 0012 FFF7FEFF 		bl	makeNodeStatusMessage
 233              	.LVL21:
  56:Src/oi_uavcan.c ****     buffer[8] = APP_VERSION_MINOR;
 234              		.loc 1 56 0
 235 0016 0123     		movs	r3, #1
 236 0018 E371     		strb	r3, [r4, #7]
  57:Src/oi_uavcan.c ****     buffer[9] = 1;  // Optional field flags, VCS commit is set
 237              		.loc 1 57 0
 238 001a 0022     		movs	r2, #0
 239 001c 2272     		strb	r2, [r4, #8]
  58:Src/oi_uavcan.c ****     const uint32_t git_hash = FIRMWARE_GIT_HASH;
 240              		.loc 1 58 0
 241 001e 6372     		strb	r3, [r4, #9]
  59:Src/oi_uavcan.c ****     canardEncodeScalar(buffer, 80, 32, &git_hash);
 242              		.loc 1 59 0
 243 0020 02AB     		add	r3, sp, #8
 244 0022 43F8042D 		str	r2, [r3, #-4]!
  60:Src/oi_uavcan.c **** 
 245              		.loc 1 60 0
 246 0026 2022     		movs	r2, #32
 247 0028 5021     		movs	r1, #80
 248 002a 2046     		mov	r0, r4
 249 002c FFF7FEFF 		bl	canardEncodeScalar
 250              	.LVL22:
  62:Src/oi_uavcan.c ****     const size_t name_len = strlen(APP_NODE_NAME);
 251              		.loc 1 62 0
 252 0030 04F11800 		add	r0, r4, #24
 253 0034 FFF7FEFF 		bl	readUniqueID
 254              	.LVL23:
  64:Src/oi_uavcan.c ****     return 41 + name_len ;
 255              		.loc 1 64 0
 256 0038 0A4E     		ldr	r6, .L21
 257 003a 2934     		adds	r4, r4, #41
 258              	.LVL24:
 259 003c 06F12007 		add	r7, r6, #32
 260              	.LVL25:
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 10


 261              	.L19:
 262 0040 3546     		mov	r5, r6
 263 0042 0FCD     		ldmia	r5!, {r0, r1, r2, r3}
 264 0044 2060     		str	r0, [r4]	@ unaligned
 265 0046 6160     		str	r1, [r4, #4]	@ unaligned
 266 0048 A260     		str	r2, [r4, #8]	@ unaligned
 267 004a E360     		str	r3, [r4, #12]	@ unaligned
 268 004c 2E46     		mov	r6, r5
 269 004e 1034     		adds	r4, r4, #16
 270 0050 BD42     		cmp	r5, r7
 271 0052 F5D1     		bne	.L19
 272 0054 2868     		ldr	r0, [r5]
 273 0056 2060     		str	r0, [r4]	@ unaligned
 274 0058 2B79     		ldrb	r3, [r5, #4]	@ zero_extendqisi2
 275 005a 2371     		strb	r3, [r4, #4]
  66:Src/oi_uavcan.c **** 
 276              		.loc 1 66 0
 277 005c 4E20     		movs	r0, #78
 278 005e 03B0     		add	sp, sp, #12
 279              	.LCFI5:
 280              		.cfi_def_cfa_offset 20
 281              		@ sp needed
 282 0060 F0BD     		pop	{r4, r5, r6, r7, pc}
 283              	.L22:
 284 0062 00BF     		.align	2
 285              	.L21:
 286 0064 00000000 		.word	.LC0
 287              		.cfi_endproc
 288              	.LFE134:
 290              		.section	.text.getNodeInfoHandleCanard,"ax",%progbits
 291              		.align	1
 292              		.syntax unified
 293              		.thumb
 294              		.thumb_func
 295              		.fpu fpv4-sp-d16
 297              	getNodeInfoHandleCanard:
 298              	.LFB135:
  69:Src/oi_uavcan.c ****     uint8_t buffer[UAVCAN_GET_NODE_INFO_RESPONSE_MAX_SIZE];
 299              		.loc 1 69 0
 300              		.cfi_startproc
 301              		@ args = 0, pretend = 0, frame = 384
 302              		@ frame_needed = 0, uses_anonymous_args = 0
 303              	.LVL26:
 304 0000 30B5     		push	{r4, r5, lr}
 305              	.LCFI6:
 306              		.cfi_def_cfa_offset 12
 307              		.cfi_offset 4, -12
 308              		.cfi_offset 5, -8
 309              		.cfi_offset 14, -4
 310 0002 E7B0     		sub	sp, sp, #412
 311              	.LCFI7:
 312              		.cfi_def_cfa_offset 424
 313 0004 0446     		mov	r4, r0
  71:Src/oi_uavcan.c ****     const uint16_t len = makeNodeInfoMessage(buffer);
 314              		.loc 1 71 0
 315 0006 07AD     		add	r5, sp, #28
 316 0008 40F27912 		movw	r2, #377
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 11


 317 000c 0021     		movs	r1, #0
 318 000e 2846     		mov	r0, r5
 319              	.LVL27:
 320 0010 FFF7FEFF 		bl	memset
 321              	.LVL28:
  72:Src/oi_uavcan.c ****     int result = canardRequestOrRespond(&g_canard,
 322              		.loc 1 72 0
 323 0014 2846     		mov	r0, r5
 324 0016 FFF7FEFF 		bl	makeNodeInfoMessage
 325              	.LVL29:
  73:Src/oi_uavcan.c ****                                         transfer->source_node_id,
 326              		.loc 1 73 0
 327 001a E17E     		ldrb	r1, [r4, #27]	@ zero_extendqisi2
 328 001c 0590     		str	r0, [sp, #20]
 329 001e 0495     		str	r5, [sp, #16]
 330 0020 0023     		movs	r3, #0
 331 0022 0393     		str	r3, [sp, #12]
 332 0024 A37E     		ldrb	r3, [r4, #26]	@ zero_extendqisi2
 333 0026 0293     		str	r3, [sp, #8]
 334 0028 1934     		adds	r4, r4, #25
 335              	.LVL30:
 336 002a 0194     		str	r4, [sp, #4]
 337 002c 0123     		movs	r3, #1
 338 002e 0093     		str	r3, [sp]
 339 0030 04A3     		adr	r3, .L25+4
 340 0032 D3E90023 		ldrd	r2, [r3]
 341 0036 0248     		ldr	r0, .L25
 342              	.LVL31:
 343 0038 FFF7FEFF 		bl	canardRequestOrRespond
 344              	.LVL32:
  86:Src/oi_uavcan.c **** 
 345              		.loc 1 86 0
 346 003c 67B0     		add	sp, sp, #412
 347              	.LCFI8:
 348              		.cfi_def_cfa_offset 12
 349              		@ sp needed
 350 003e 30BD     		pop	{r4, r5, pc}
 351              	.LVL33:
 352              	.L26:
 353              		.align	3
 354              	.L25:
 355 0040 00000000 		.word	.LANCHOR1
 356 0044 9E6AC421 		.word	566520478
 357 0048 818A46EE 		.word	-297366911
 358              		.cfi_endproc
 359              	.LFE135:
 361              		.section	.text.encodeParamCanard,"ax",%progbits
 362              		.align	1
 363              		.syntax unified
 364              		.thumb
 365              		.thumb_func
 366              		.fpu fpv4-sp-d16
 368              	encodeParamCanard:
 369              	.LFB136:
  90:Src/oi_uavcan.c ****     uint8_t n     = 0;
 370              		.loc 1 90 0
 371              		.cfi_startproc
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 12


 372              		@ args = 0, pretend = 0, frame = 8
 373              		@ frame_needed = 0, uses_anonymous_args = 0
 374              	.LVL34:
 375 0000 70B5     		push	{r4, r5, r6, lr}
 376              	.LCFI9:
 377              		.cfi_def_cfa_offset 16
 378              		.cfi_offset 4, -16
 379              		.cfi_offset 5, -12
 380              		.cfi_offset 6, -8
 381              		.cfi_offset 14, -4
 382 0002 82B0     		sub	sp, sp, #8
 383              	.LCFI10:
 384              		.cfi_def_cfa_offset 24
 385 0004 0C46     		mov	r4, r1
  91:Src/oi_uavcan.c ****     int offset    = 0;
 386              		.loc 1 91 0
 387 0006 0023     		movs	r3, #0
 388 0008 8DF80730 		strb	r3, [sp, #7]
 389              	.LVL35:
  93:Src/oi_uavcan.c **** 
 390              		.loc 1 93 0
 391 000c 0123     		movs	r3, #1
 392 000e 8DF80630 		strb	r3, [sp, #6]
  95:Src/oi_uavcan.c ****     {
 393              		.loc 1 95 0
 394 0012 0028     		cmp	r0, #0
 395 0014 65D0     		beq	.L31
 396 0016 0546     		mov	r5, r0
 116:Src/oi_uavcan.c ****     offset += 5;
 397              		.loc 1 116 0
 398 0018 0DF10703 		add	r3, sp, #7
 399 001c 0522     		movs	r2, #5
 400 001e 0021     		movs	r1, #0
 401              	.LVL36:
 402 0020 2046     		mov	r0, r4
 403              	.LVL37:
 404 0022 FFF7FEFF 		bl	canardEncodeScalar
 405              	.LVL38:
 118:Src/oi_uavcan.c ****     offset += 3;
 406              		.loc 1 118 0
 407 0026 0DF10603 		add	r3, sp, #6
 408 002a 0322     		movs	r2, #3
 409 002c 0521     		movs	r1, #5
 410 002e 2046     		mov	r0, r4
 411 0030 FFF7FEFF 		bl	canardEncodeScalar
 412              	.LVL39:
 120:Src/oi_uavcan.c ****     offset += 64;
 413              		.loc 1 120 0
 414 0034 05F10803 		add	r3, r5, #8
 415 0038 4022     		movs	r2, #64
 416 003a 0821     		movs	r1, #8
 417 003c 2046     		mov	r0, r4
 418 003e FFF7FEFF 		bl	canardEncodeScalar
 419              	.LVL40:
 123:Src/oi_uavcan.c ****     offset += 5;
 420              		.loc 1 123 0
 421 0042 0DF10703 		add	r3, sp, #7
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 13


 422 0046 0522     		movs	r2, #5
 423 0048 4821     		movs	r1, #72
 424 004a 2046     		mov	r0, r4
 425 004c FFF7FEFF 		bl	canardEncodeScalar
 426              	.LVL41:
 125:Src/oi_uavcan.c ****     offset += 3;
 427              		.loc 1 125 0
 428 0050 0DF10603 		add	r3, sp, #6
 429 0054 0322     		movs	r2, #3
 430 0056 4D21     		movs	r1, #77
 431 0058 2046     		mov	r0, r4
 432 005a FFF7FEFF 		bl	canardEncodeScalar
 433              	.LVL42:
 127:Src/oi_uavcan.c ****     offset += 64;
 434              		.loc 1 127 0
 435 005e 05F12003 		add	r3, r5, #32
 436 0062 4022     		movs	r2, #64
 437 0064 5021     		movs	r1, #80
 438 0066 2046     		mov	r0, r4
 439 0068 FFF7FEFF 		bl	canardEncodeScalar
 440              	.LVL43:
 130:Src/oi_uavcan.c ****     offset += 6;
 441              		.loc 1 130 0
 442 006c 0DF10703 		add	r3, sp, #7
 443 0070 0622     		movs	r2, #6
 444 0072 9021     		movs	r1, #144
 445 0074 2046     		mov	r0, r4
 446 0076 FFF7FEFF 		bl	canardEncodeScalar
 447              	.LVL44:
 132:Src/oi_uavcan.c ****     offset += 2;
 448              		.loc 1 132 0
 449 007a 0DF10603 		add	r3, sp, #6
 450 007e 0222     		movs	r2, #2
 451 0080 9621     		movs	r1, #150
 452 0082 2046     		mov	r0, r4
 453 0084 FFF7FEFF 		bl	canardEncodeScalar
 454              	.LVL45:
 134:Src/oi_uavcan.c ****     offset += 64;
 455              		.loc 1 134 0
 456 0088 05F11803 		add	r3, r5, #24
 457 008c 4022     		movs	r2, #64
 458 008e 9821     		movs	r1, #152
 459 0090 2046     		mov	r0, r4
 460 0092 FFF7FEFF 		bl	canardEncodeScalar
 461              	.LVL46:
 137:Src/oi_uavcan.c ****     offset += 6;
 462              		.loc 1 137 0
 463 0096 0DF10703 		add	r3, sp, #7
 464 009a 0622     		movs	r2, #6
 465 009c D821     		movs	r1, #216
 466 009e 2046     		mov	r0, r4
 467 00a0 FFF7FEFF 		bl	canardEncodeScalar
 468              	.LVL47:
 139:Src/oi_uavcan.c ****     offset += 2;
 469              		.loc 1 139 0
 470 00a4 0DF10603 		add	r3, sp, #6
 471 00a8 0222     		movs	r2, #2
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 14


 472 00aa DE21     		movs	r1, #222
 473 00ac 2046     		mov	r0, r4
 474 00ae FFF7FEFF 		bl	canardEncodeScalar
 475              	.LVL48:
 141:Src/oi_uavcan.c ****     offset += 64;
 476              		.loc 1 141 0
 477 00b2 05F11003 		add	r3, r5, #16
 478 00b6 4022     		movs	r2, #64
 479 00b8 E021     		movs	r1, #224
 480 00ba 2046     		mov	r0, r4
 481 00bc FFF7FEFF 		bl	canardEncodeScalar
 482              	.LVL49:
 144:Src/oi_uavcan.c ****     /* See important note below */
 483              		.loc 1 144 0
 484 00c0 2434     		adds	r4, r4, #36
 485              	.LVL50:
 486 00c2 2E68     		ldr	r6, [r5]
 487 00c4 3046     		mov	r0, r6
 488 00c6 FFF7FEFF 		bl	strlen
 489              	.LVL51:
 490 00ca 0246     		mov	r2, r0
 491 00cc 3146     		mov	r1, r6
 492 00ce 2046     		mov	r0, r4
 493 00d0 FFF7FEFF 		bl	memcpy
 494              	.LVL52:
 146:Src/oi_uavcan.c **** 
 495              		.loc 1 146 0
 496 00d4 2868     		ldr	r0, [r5]
 497 00d6 FFF7FEFF 		bl	strlen
 498              	.LVL53:
 499 00da 2430     		adds	r0, r0, #36
 500 00dc 80B2     		uxth	r0, r0
 501              	.LVL54:
 502              	.L29:
 148:Src/oi_uavcan.c **** 
 503              		.loc 1 148 0
 504 00de 02B0     		add	sp, sp, #8
 505              	.LCFI11:
 506              		.cfi_remember_state
 507              		.cfi_def_cfa_offset 16
 508              		@ sp needed
 509 00e0 70BD     		pop	{r4, r5, r6, pc}
 510              	.LVL55:
 511              	.L31:
 512              	.LCFI12:
 513              		.cfi_restore_state
  97:Src/oi_uavcan.c ****         canardEncodeScalar(buffer, offset, 5, &n);
 514              		.loc 1 97 0
 515 00e2 0025     		movs	r5, #0
 516 00e4 8DF80650 		strb	r5, [sp, #6]
  98:Src/oi_uavcan.c ****         offset += 5;
 517              		.loc 1 98 0
 518 00e8 0DF10703 		add	r3, sp, #7
 519 00ec 0522     		movs	r2, #5
 520 00ee 2946     		mov	r1, r5
 521              	.LVL56:
 522 00f0 2046     		mov	r0, r4
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 15


 523              	.LVL57:
 524 00f2 FFF7FEFF 		bl	canardEncodeScalar
 525              	.LVL58:
 100:Src/oi_uavcan.c ****         offset += 3;
 526              		.loc 1 100 0
 527 00f6 0DF10603 		add	r3, sp, #6
 528 00fa 0322     		movs	r2, #3
 529 00fc 0521     		movs	r1, #5
 530 00fe 2046     		mov	r0, r4
 531 0100 FFF7FEFF 		bl	canardEncodeScalar
 532              	.LVL59:
 103:Src/oi_uavcan.c ****         offset += 6;
 533              		.loc 1 103 0
 534 0104 0DF10703 		add	r3, sp, #7
 535 0108 0622     		movs	r2, #6
 536 010a 0821     		movs	r1, #8
 537 010c 2046     		mov	r0, r4
 538 010e FFF7FEFF 		bl	canardEncodeScalar
 539              	.LVL60:
 105:Src/oi_uavcan.c ****         offset += 2;
 540              		.loc 1 105 0
 541 0112 0DF10603 		add	r3, sp, #6
 542 0116 0222     		movs	r2, #2
 543 0118 0E21     		movs	r1, #14
 544 011a 2046     		mov	r0, r4
 545 011c FFF7FEFF 		bl	canardEncodeScalar
 546              	.LVL61:
 108:Src/oi_uavcan.c ****         offset += 6;
 547              		.loc 1 108 0
 548 0120 0DF10703 		add	r3, sp, #7
 549 0124 0622     		movs	r2, #6
 550 0126 1021     		movs	r1, #16
 551 0128 2046     		mov	r0, r4
 552 012a FFF7FEFF 		bl	canardEncodeScalar
 553              	.LVL62:
 110:Src/oi_uavcan.c ****         offset += 2;
 554              		.loc 1 110 0
 555 012e 0DF10603 		add	r3, sp, #6
 556 0132 0222     		movs	r2, #2
 557 0134 1621     		movs	r1, #22
 558 0136 2046     		mov	r0, r4
 559 0138 FFF7FEFF 		bl	canardEncodeScalar
 560              	.LVL63:
 112:Src/oi_uavcan.c ****         return ( offset / 8 + 1 );
 561              		.loc 1 112 0
 562 013c E570     		strb	r5, [r4, #3]
 113:Src/oi_uavcan.c ****     }
 563              		.loc 1 113 0
 564 013e 0420     		movs	r0, #4
 565 0140 CDE7     		b	.L29
 566              		.cfi_endproc
 567              	.LFE136:
 569              		.section	.text.oi_uavcan_getParamByIndex,"ax",%progbits
 570              		.align	1
 571              		.global	oi_uavcan_getParamByIndex
 572              		.syntax unified
 573              		.thumb
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 16


 574              		.thumb_func
 575              		.fpu fpv4-sp-d16
 577              	oi_uavcan_getParamByIndex:
 578              	.LFB140:
 234:Src/oi_uavcan.c **** 
 235:Src/oi_uavcan.c **** 
 236:Src/oi_uavcan.c **** static void onTransferReceived(CanardInstance* ins, CanardRxTransfer* transfer)
 237:Src/oi_uavcan.c **** {
 238:Src/oi_uavcan.c ****    if ((transfer->transfer_type == CanardTransferTypeRequest) &&
 239:Src/oi_uavcan.c ****    (transfer->data_type_id == UAVCAN_GET_NODE_INFO_DATA_TYPE_ID))
 240:Src/oi_uavcan.c ****    {
 241:Src/oi_uavcan.c **** 	    getNodeInfoHandleCanard(transfer);
 242:Src/oi_uavcan.c ****    }
 243:Src/oi_uavcan.c **** 
 244:Src/oi_uavcan.c **** 
 245:Src/oi_uavcan.c **** 
 246:Src/oi_uavcan.c ****    if ((transfer->transfer_type == CanardTransferTypeRequest) &&
 247:Src/oi_uavcan.c ****    (transfer->data_type_id == UAVCAN_PROTOCOL_PARAM_GETSET_ID))
 248:Src/oi_uavcan.c ****    {
 249:Src/oi_uavcan.c ****       getsetHandleCanard(transfer);
 250:Src/oi_uavcan.c ****    }
 251:Src/oi_uavcan.c **** 
 252:Src/oi_uavcan.c **** 
 253:Src/oi_uavcan.c **** }
 254:Src/oi_uavcan.c **** 
 255:Src/oi_uavcan.c **** 
 256:Src/oi_uavcan.c **** 
 257:Src/oi_uavcan.c **** 
 258:Src/oi_uavcan.c **** 
 259:Src/oi_uavcan.c **** 
 260:Src/oi_uavcan.c **** /**********
 261:Src/oi_uavcan.c ****  public
 262:Src/oi_uavcan.c ****  **********/
 263:Src/oi_uavcan.c **** 
 264:Src/oi_uavcan.c **** param_t* oi_uavcan_getParamByIndex(uint16_t index)
 265:Src/oi_uavcan.c **** {
 579              		.loc 1 265 0
 580              		.cfi_startproc
 581              		@ args = 0, pretend = 0, frame = 0
 582              		@ frame_needed = 0, uses_anonymous_args = 0
 583              		@ link register save eliminated.
 584              	.LVL64:
 266:Src/oi_uavcan.c ****    if (index >= ARRAY_SIZE(parameters))
 585              		.loc 1 266 0
 586 0000 28B9     		cbnz	r0, .L34
 267:Src/oi_uavcan.c ****    {
 268:Src/oi_uavcan.c ****        return NULL;
 269:Src/oi_uavcan.c ****    }
 270:Src/oi_uavcan.c ****    return &parameters[index];
 587              		.loc 1 270 0
 588 0002 00EB8003 		add	r3, r0, r0, lsl #2
 589 0006 DA00     		lsls	r2, r3, #3
 590 0008 0248     		ldr	r0, .L35
 591              	.LVL65:
 592 000a 1044     		add	r0, r0, r2
 593 000c 7047     		bx	lr
 594              	.LVL66:
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 17


 595              	.L34:
 268:Src/oi_uavcan.c ****    }
 596              		.loc 1 268 0
 597 000e 0020     		movs	r0, #0
 598              	.LVL67:
 271:Src/oi_uavcan.c **** }
 599              		.loc 1 271 0
 600 0010 7047     		bx	lr
 601              	.L36:
 602 0012 00BF     		.align	2
 603              	.L35:
 604 0014 00000000 		.word	.LANCHOR2
 605              		.cfi_endproc
 606              	.LFE140:
 608              		.section	.text.oi_uavcan_getParamByName,"ax",%progbits
 609              		.align	1
 610              		.global	oi_uavcan_getParamByName
 611              		.syntax unified
 612              		.thumb
 613              		.thumb_func
 614              		.fpu fpv4-sp-d16
 616              	oi_uavcan_getParamByName:
 617              	.LFB141:
 272:Src/oi_uavcan.c **** 
 273:Src/oi_uavcan.c **** param_t* oi_uavcan_getParamByName(uint8_t * name)
 274:Src/oi_uavcan.c **** {
 618              		.loc 1 274 0
 619              		.cfi_startproc
 620              		@ args = 0, pretend = 0, frame = 0
 621              		@ frame_needed = 0, uses_anonymous_args = 0
 622              	.LVL68:
 623 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 624              	.LCFI13:
 625              		.cfi_def_cfa_offset 24
 626              		.cfi_offset 3, -24
 627              		.cfi_offset 4, -20
 628              		.cfi_offset 5, -16
 629              		.cfi_offset 6, -12
 630              		.cfi_offset 7, -8
 631              		.cfi_offset 14, -4
 632 0002 0646     		mov	r6, r0
 633              	.LVL69:
 634              	.LBB3:
 275:Src/oi_uavcan.c ****    for (uint16_t i = 0; i < ARRAY_SIZE(parameters); i++)
 635              		.loc 1 275 0
 636 0004 0024     		movs	r4, #0
 637              	.LVL70:
 638              	.L38:
 639              		.loc 1 275 0 is_stmt 0 discriminator 1
 640 0006 0CB1     		cbz	r4, .L41
 641              	.LBE3:
 276:Src/oi_uavcan.c ****    {
 277:Src/oi_uavcan.c ****        if (strncmp(name, parameters[i].name, strlen(parameters[i].name)) == 0)
 278:Src/oi_uavcan.c ****        {
 279:Src/oi_uavcan.c ****              return &parameters[i];
 280:Src/oi_uavcan.c ****        }
 281:Src/oi_uavcan.c ****    }
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 18


 282:Src/oi_uavcan.c ****    return NULL;
 642              		.loc 1 282 0 is_stmt 1
 643 0008 0020     		movs	r0, #0
 644              	.L37:
 283:Src/oi_uavcan.c **** }
 645              		.loc 1 283 0
 646 000a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 647              	.LVL71:
 648              	.L41:
 649              	.LBB4:
 277:Src/oi_uavcan.c ****        {
 650              		.loc 1 277 0
 651 000c 04EB8402 		add	r2, r4, r4, lsl #2
 652 0010 D300     		lsls	r3, r2, #3
 653 0012 0A4A     		ldr	r2, .L44
 654 0014 D558     		ldr	r5, [r2, r3]
 655 0016 2846     		mov	r0, r5
 656 0018 FFF7FEFF 		bl	strlen
 657              	.LVL72:
 658 001c 0246     		mov	r2, r0
 659 001e 2946     		mov	r1, r5
 660 0020 3046     		mov	r0, r6
 661 0022 FFF7FEFF 		bl	strncmp
 662              	.LVL73:
 663 0026 10B1     		cbz	r0, .L43
 275:Src/oi_uavcan.c ****    {
 664              		.loc 1 275 0 discriminator 2
 665 0028 0134     		adds	r4, r4, #1
 666              	.LVL74:
 667 002a A4B2     		uxth	r4, r4
 668              	.LVL75:
 669 002c EBE7     		b	.L38
 670              	.L43:
 279:Src/oi_uavcan.c ****        }
 671              		.loc 1 279 0
 672 002e 04EB8407 		add	r7, r4, r4, lsl #2
 673 0032 FB00     		lsls	r3, r7, #3
 674 0034 0148     		ldr	r0, .L44
 675 0036 1844     		add	r0, r0, r3
 676 0038 E7E7     		b	.L37
 677              	.L45:
 678 003a 00BF     		.align	2
 679              	.L44:
 680 003c 00000000 		.word	.LANCHOR2
 681              	.LBE4:
 682              		.cfi_endproc
 683              	.LFE141:
 685              		.section	.text.getsetHandleCanard,"ax",%progbits
 686              		.align	1
 687              		.syntax unified
 688              		.thumb
 689              		.thumb_func
 690              		.fpu fpv4-sp-d16
 692              	getsetHandleCanard:
 693              	.LFB137:
 150:Src/oi_uavcan.c **** 
 694              		.loc 1 150 0
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 19


 695              		.cfi_startproc
 696              		@ args = 0, pretend = 0, frame = 96
 697              		@ frame_needed = 0, uses_anonymous_args = 0
 698              	.LVL76:
 699 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 700              	.LCFI14:
 701              		.cfi_def_cfa_offset 20
 702              		.cfi_offset 4, -20
 703              		.cfi_offset 5, -16
 704              		.cfi_offset 6, -12
 705              		.cfi_offset 7, -8
 706              		.cfi_offset 14, -4
 707 0002 9FB0     		sub	sp, sp, #124
 708              	.LCFI15:
 709              		.cfi_def_cfa_offset 144
 710 0004 0746     		mov	r7, r0
 152:Src/oi_uavcan.c ****     uint8_t tag    = 0;
 711              		.loc 1 152 0
 712 0006 4FF6FF73 		movw	r3, #65535
 713 000a ADF87630 		strh	r3, [sp, #118]	@ movhi
 153:Src/oi_uavcan.c ****     int offset     = 0;
 714              		.loc 1 153 0
 715 000e 0024     		movs	r4, #0
 716 0010 8DF87540 		strb	r4, [sp, #117]
 717              	.LVL77:
 155:Src/oi_uavcan.c **** 
 718              		.loc 1 155 0
 719 0014 0022     		movs	r2, #0
 720 0016 0023     		movs	r3, #0
 721 0018 CDE91A23 		strd	r2, [sp, #104]
 157:Src/oi_uavcan.c ****     offset += 13;
 722              		.loc 1 157 0
 723 001c 0DF17603 		add	r3, sp, #118
 724 0020 0093     		str	r3, [sp]
 725 0022 2346     		mov	r3, r4
 726 0024 0D22     		movs	r2, #13
 727 0026 2146     		mov	r1, r4
 728 0028 FFF7FEFF 		bl	canardDecodeScalar
 729              	.LVL78:
 159:Src/oi_uavcan.c ****     offset += 3;
 730              		.loc 1 159 0
 731 002c 0DF17503 		add	r3, sp, #117
 732 0030 0093     		str	r3, [sp]
 733 0032 2346     		mov	r3, r4
 734 0034 0322     		movs	r2, #3
 735 0036 0D21     		movs	r1, #13
 736 0038 3846     		mov	r0, r7
 737 003a FFF7FEFF 		bl	canardDecodeScalar
 738              	.LVL79:
 162:Src/oi_uavcan.c ****     {
 739              		.loc 1 162 0
 740 003e 9DF87530 		ldrb	r3, [sp, #117]	@ zero_extendqisi2
 741 0042 012B     		cmp	r3, #1
 742 0044 0FD0     		beq	.L56
 160:Src/oi_uavcan.c **** 
 743              		.loc 1 160 0
 744 0046 1025     		movs	r5, #16
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 20


 745              	.LVL80:
 746              	.L47:
 168:Src/oi_uavcan.c ****     uint8_t name[16] = "";
 747              		.loc 1 168 0
 748 0048 BB8A     		ldrh	r3, [r7, #20]
 749 004a 2E46     		mov	r6, r5
 750 004c 002D     		cmp	r5, #0
 751 004e 14DB     		blt	.L57
 752              	.L48:
 753 0050 F610     		asrs	r6, r6, #3
 754 0052 7642     		negs	r6, r6
 755 0054 13FA86F6 		uxtah	r6, r3, r6
 756 0058 B6B2     		uxth	r6, r6
 757              	.LVL81:
 169:Src/oi_uavcan.c ****     for (int i = 0; i < n; i++)
 758              		.loc 1 169 0
 759 005a 0024     		movs	r4, #0
 760 005c 1694     		str	r4, [sp, #88]
 761 005e 1794     		str	r4, [sp, #92]
 762 0060 1894     		str	r4, [sp, #96]
 763 0062 1994     		str	r4, [sp, #100]
 764              	.LVL82:
 765              	.LBB5:
 170:Src/oi_uavcan.c ****     {
 766              		.loc 1 170 0
 767 0064 16E0     		b	.L49
 768              	.LVL83:
 769              	.L56:
 770              	.LBE5:
 164:Src/oi_uavcan.c ****         offset += 64;
 771              		.loc 1 164 0
 772 0066 1AAB     		add	r3, sp, #104
 773 0068 0093     		str	r3, [sp]
 774 006a 2346     		mov	r3, r4
 775 006c 4022     		movs	r2, #64
 776 006e 1021     		movs	r1, #16
 777 0070 3846     		mov	r0, r7
 778 0072 FFF7FEFF 		bl	canardDecodeScalar
 779              	.LVL84:
 165:Src/oi_uavcan.c ****     }
 780              		.loc 1 165 0
 781 0076 5025     		movs	r5, #80
 782 0078 E6E7     		b	.L47
 783              	.LVL85:
 784              	.L57:
 168:Src/oi_uavcan.c ****     uint8_t name[16] = "";
 785              		.loc 1 168 0
 786 007a EE1D     		adds	r6, r5, #7
 787 007c E8E7     		b	.L48
 788              	.LVL86:
 789              	.L50:
 790              	.LBB6:
 172:Src/oi_uavcan.c ****         offset += 8;
 791              		.loc 1 172 0 discriminator 3
 792 007e 16AB     		add	r3, sp, #88
 793 0080 2344     		add	r3, r3, r4
 794 0082 0093     		str	r3, [sp]
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 21


 795 0084 0023     		movs	r3, #0
 796 0086 0822     		movs	r2, #8
 797 0088 2946     		mov	r1, r5
 798 008a 3846     		mov	r0, r7
 799 008c FFF7FEFF 		bl	canardDecodeScalar
 800              	.LVL87:
 173:Src/oi_uavcan.c ****     }
 801              		.loc 1 173 0 discriminator 3
 802 0090 0835     		adds	r5, r5, #8
 803              	.LVL88:
 170:Src/oi_uavcan.c ****     {
 804              		.loc 1 170 0 discriminator 3
 805 0092 0134     		adds	r4, r4, #1
 806              	.LVL89:
 807              	.L49:
 170:Src/oi_uavcan.c ****     {
 808              		.loc 1 170 0 is_stmt 0 discriminator 1
 809 0094 A642     		cmp	r6, r4
 810 0096 F2DC     		bgt	.L50
 811              	.LVL90:
 812              	.LBE6:
 178:Src/oi_uavcan.c ****     {
 813              		.loc 1 178 0 is_stmt 1
 814 0098 9DF85830 		ldrb	r3, [sp, #88]	@ zero_extendqisi2
 815 009c 3BBB     		cbnz	r3, .L58
 184:Src/oi_uavcan.c ****     }
 816              		.loc 1 184 0
 817 009e BDF87600 		ldrh	r0, [sp, #118]
 818 00a2 FFF7FEFF 		bl	oi_uavcan_getParamByIndex
 819              	.LVL91:
 820 00a6 0546     		mov	r5, r0
 821              	.LVL92:
 822              	.L52:
 187:Src/oi_uavcan.c ****     {
 823              		.loc 1 187 0
 824 00a8 1DB1     		cbz	r5, .L53
 187:Src/oi_uavcan.c ****     {
 825              		.loc 1 187 0 is_stmt 0 discriminator 1
 826 00aa 9DF87530 		ldrb	r3, [sp, #117]	@ zero_extendqisi2
 827 00ae 012B     		cmp	r3, #1
 828 00b0 22D0     		beq	.L59
 829              	.L53:
 192:Src/oi_uavcan.c ****     uint16_t len = encodeParamCanard(p, buffer);
 830              		.loc 1 192 0 is_stmt 1
 831 00b2 0024     		movs	r4, #0
 832              	.LVL93:
 833 00b4 0694     		str	r4, [sp, #24]
 834 00b6 3C22     		movs	r2, #60
 835 00b8 2146     		mov	r1, r4
 836 00ba 07A8     		add	r0, sp, #28
 837              	.LVL94:
 838 00bc FFF7FEFF 		bl	memset
 839              	.LVL95:
 193:Src/oi_uavcan.c ****     int result = canardRequestOrRespond(&g_canard,
 840              		.loc 1 193 0
 841 00c0 06AE     		add	r6, sp, #24
 842              	.LVL96:
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 22


 843 00c2 3146     		mov	r1, r6
 844 00c4 2846     		mov	r0, r5
 845 00c6 FFF7FEFF 		bl	encodeParamCanard
 846              	.LVL97:
 194:Src/oi_uavcan.c ****                                         transfer->source_node_id,
 847              		.loc 1 194 0
 848 00ca F97E     		ldrb	r1, [r7, #27]	@ zero_extendqisi2
 849 00cc 0590     		str	r0, [sp, #20]
 850 00ce 0496     		str	r6, [sp, #16]
 851 00d0 0394     		str	r4, [sp, #12]
 852 00d2 BB7E     		ldrb	r3, [r7, #26]	@ zero_extendqisi2
 853 00d4 0293     		str	r3, [sp, #8]
 854 00d6 1937     		adds	r7, r7, #25
 855              	.LVL98:
 856 00d8 0197     		str	r7, [sp, #4]
 857 00da 0B23     		movs	r3, #11
 858 00dc 0093     		str	r3, [sp]
 859 00de 0BA3     		adr	r3, .L60+4
 860 00e0 D3E90023 		ldrd	r2, [r3]
 861 00e4 0848     		ldr	r0, .L60
 862              	.LVL99:
 863 00e6 FFF7FEFF 		bl	canardRequestOrRespond
 864              	.LVL100:
 208:Src/oi_uavcan.c **** 
 865              		.loc 1 208 0
 866 00ea 1FB0     		add	sp, sp, #124
 867              	.LCFI16:
 868              		.cfi_remember_state
 869              		.cfi_def_cfa_offset 20
 870              		@ sp needed
 871 00ec F0BD     		pop	{r4, r5, r6, r7, pc}
 872              	.LVL101:
 873              	.L58:
 874              	.LCFI17:
 875              		.cfi_restore_state
 180:Src/oi_uavcan.c ****     }
 876              		.loc 1 180 0
 877 00ee 16A8     		add	r0, sp, #88
 878 00f0 FFF7FEFF 		bl	oi_uavcan_getParamByName
 879              	.LVL102:
 880 00f4 0546     		mov	r5, r0
 881              	.LVL103:
 882 00f6 D7E7     		b	.L52
 883              	.L59:
 189:Src/oi_uavcan.c ****     }
 884              		.loc 1 189 0
 885 00f8 DDE91A23 		ldrd	r2, [sp, #104]
 886 00fc C5E90223 		strd	r2, [r5, #8]
 887 0100 D7E7     		b	.L53
 888              	.L61:
 889 0102 00BFAFF3 		.align	3
 889      0080
 890              	.L60:
 891 0108 00000000 		.word	.LANCHOR1
 892 010c D5A4D139 		.word	970040533
 893 0110 F922B6A7 		.word	-1481235719
 894              		.cfi_endproc
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 23


 895              	.LFE137:
 897              		.section	.text.onTransferReceived,"ax",%progbits
 898              		.align	1
 899              		.syntax unified
 900              		.thumb
 901              		.thumb_func
 902              		.fpu fpv4-sp-d16
 904              	onTransferReceived:
 905              	.LFB139:
 237:Src/oi_uavcan.c ****    if ((transfer->transfer_type == CanardTransferTypeRequest) &&
 906              		.loc 1 237 0
 907              		.cfi_startproc
 908              		@ args = 0, pretend = 0, frame = 0
 909              		@ frame_needed = 0, uses_anonymous_args = 0
 910              	.LVL104:
 911 0000 10B5     		push	{r4, lr}
 912              	.LCFI18:
 913              		.cfi_def_cfa_offset 8
 914              		.cfi_offset 4, -8
 915              		.cfi_offset 14, -4
 916 0002 0C46     		mov	r4, r1
 238:Src/oi_uavcan.c ****    (transfer->data_type_id == UAVCAN_GET_NODE_INFO_DATA_TYPE_ID))
 917              		.loc 1 238 0
 918 0004 0B7E     		ldrb	r3, [r1, #24]	@ zero_extendqisi2
 919 0006 012B     		cmp	r3, #1
 920 0008 03D0     		beq	.L66
 921              	.LVL105:
 922              	.L63:
 246:Src/oi_uavcan.c ****    (transfer->data_type_id == UAVCAN_PROTOCOL_PARAM_GETSET_ID))
 923              		.loc 1 246 0
 924 000a 237E     		ldrb	r3, [r4, #24]	@ zero_extendqisi2
 925 000c 012B     		cmp	r3, #1
 926 000e 07D0     		beq	.L67
 927              	.L62:
 253:Src/oi_uavcan.c **** 
 928              		.loc 1 253 0
 929 0010 10BD     		pop	{r4, pc}
 930              	.LVL106:
 931              	.L66:
 239:Src/oi_uavcan.c ****    {
 932              		.loc 1 239 0 discriminator 1
 933 0012 CB8A     		ldrh	r3, [r1, #22]
 238:Src/oi_uavcan.c ****    (transfer->data_type_id == UAVCAN_GET_NODE_INFO_DATA_TYPE_ID))
 934              		.loc 1 238 0 discriminator 1
 935 0014 012B     		cmp	r3, #1
 936 0016 F8D1     		bne	.L63
 241:Src/oi_uavcan.c ****    }
 937              		.loc 1 241 0
 938 0018 0846     		mov	r0, r1
 939              	.LVL107:
 940 001a FFF7FEFF 		bl	getNodeInfoHandleCanard
 941              	.LVL108:
 942 001e F4E7     		b	.L63
 943              	.L67:
 247:Src/oi_uavcan.c ****    {
 944              		.loc 1 247 0 discriminator 1
 945 0020 E38A     		ldrh	r3, [r4, #22]
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 24


 246:Src/oi_uavcan.c ****    (transfer->data_type_id == UAVCAN_PROTOCOL_PARAM_GETSET_ID))
 946              		.loc 1 246 0 discriminator 1
 947 0022 0B2B     		cmp	r3, #11
 948 0024 F4D1     		bne	.L62
 249:Src/oi_uavcan.c ****    }
 949              		.loc 1 249 0
 950 0026 2046     		mov	r0, r4
 951 0028 FFF7FEFF 		bl	getsetHandleCanard
 952              	.LVL109:
 253:Src/oi_uavcan.c **** 
 953              		.loc 1 253 0
 954 002c F0E7     		b	.L62
 955              		.cfi_endproc
 956              	.LFE139:
 958              		.section	.text.oi_uavcan_init,"ax",%progbits
 959              		.align	1
 960              		.global	oi_uavcan_init
 961              		.syntax unified
 962              		.thumb
 963              		.thumb_func
 964              		.fpu fpv4-sp-d16
 966              	oi_uavcan_init:
 967              	.LFB142:
 284:Src/oi_uavcan.c **** 
 285:Src/oi_uavcan.c **** void oi_uavcan_init(void)
 286:Src/oi_uavcan.c **** {
 968              		.loc 1 286 0
 969              		.cfi_startproc
 970              		@ args = 0, pretend = 0, frame = 8
 971              		@ frame_needed = 0, uses_anonymous_args = 0
 972 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 973              	.LCFI19:
 974              		.cfi_def_cfa_offset 20
 975              		.cfi_offset 4, -20
 976              		.cfi_offset 5, -16
 977              		.cfi_offset 6, -12
 978              		.cfi_offset 7, -8
 979              		.cfi_offset 14, -4
 980 0002 85B0     		sub	sp, sp, #20
 981              	.LCFI20:
 982              		.cfi_def_cfa_offset 40
 287:Src/oi_uavcan.c ****   //turn on TCAN330
 288:Src/oi_uavcan.c ****   HAL_GPIO_WritePin(GPIOB, CAN_S_Pin, GPIO_PIN_RESET);
 983              		.loc 1 288 0
 984 0004 4B4C     		ldr	r4, .L87
 985 0006 0022     		movs	r2, #0
 986 0008 4FF48051 		mov	r1, #4096
 987 000c 2046     		mov	r0, r4
 988 000e FFF7FEFF 		bl	HAL_GPIO_WritePin
 989              	.LVL110:
 289:Src/oi_uavcan.c ****   HAL_GPIO_WritePin(GPIOB, CAN_SHTD_Pin, GPIO_PIN_RESET);
 990              		.loc 1 289 0
 991 0012 0022     		movs	r2, #0
 992 0014 4FF40051 		mov	r1, #8192
 993 0018 2046     		mov	r0, r4
 994 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 995              	.LVL111:
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 25


 290:Src/oi_uavcan.c **** 
 291:Src/oi_uavcan.c **** 
 292:Src/oi_uavcan.c ****   CanardSTM32CANTimings timings;
 293:Src/oi_uavcan.c ****   int result = canardSTM32ComputeCANTimings(HAL_RCC_GetPCLK1Freq(), 1000000, &timings);
 996              		.loc 1 293 0
 997 001e FFF7FEFF 		bl	HAL_RCC_GetPCLK1Freq
 998              	.LVL112:
 999              	.LBB10:
 1000              	.LBB11:
 1001              		.file 2 "Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h"
   1:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** /*
   2:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * Copyright (c) 2017 UAVCAN Team
   3:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  *
   4:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * Distributed under the MIT License, available in the file LICENSE.
   5:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  *
   6:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * Author: Pavel Kirienko <pavel.kirienko@zubax.com>
   7:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  */
   8:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
   9:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** #ifndef CANARD_STM32_H
  10:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** #define CANARD_STM32_H
  11:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
  12:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** #include <canard.h>
  13:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** #include <string.h>     // NOLINT
  14:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
  15:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
  16:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** #ifdef __cplusplus
  17:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** extern "C"
  18:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** {
  19:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** #endif
  20:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
  21:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** /**
  22:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * Set this build config macro to 1 to use CAN2 instead of CAN1, if available.
  23:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * Setting this parameter when CAN2 is not available may not be detected at compile time!
  24:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  */
  25:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** #if !defined(CANARD_STM32_USE_CAN2)
  26:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** # define CANARD_STM32_USE_CAN2                                  0
  27:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** #endif
  28:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
  29:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** /**
  30:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * Trigger an assertion failure if inner priority inversion is detected at run time.
  31:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * This setting has no effect in release builds, where NDEBUG is defined.
  32:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  */
  33:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** #if !defined(CANARD_STM32_DEBUG_INNER_PRIORITY_INVERSION)
  34:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** # define CANARD_STM32_DEBUG_INNER_PRIORITY_INVERSION            1
  35:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** #endif
  36:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
  37:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** /**
  38:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * Driver error codes.
  39:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * These values are returned negated from API functions that return int.
  40:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  */
  41:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** #define CANARD_STM32_ERROR_UNSUPPORTED_BIT_RATE                         1000
  42:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** #define CANARD_STM32_ERROR_MSR_INAK_NOT_SET                             1001
  43:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** #define CANARD_STM32_ERROR_MSR_INAK_NOT_CLEARED                         1002
  44:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** #define CANARD_STM32_ERROR_UNSUPPORTED_FRAME_FORMAT                     1003
  45:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
  46:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** /**
  47:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * This is defined by the bxCAN hardware.
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 26


  48:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * Devices with only one CAN interface have 14 filters (e.g. F103).
  49:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * Devices with two CAN interfaces have 28 filters, which are shared between two interfaces (e.g. F
  50:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * The filters are distributed between CAN1 and CAN2 by means of the CAN2 start filter bank selecti
  51:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * which is a number from 1 to 27 inclusive. Seeing as the start bank cannot be set to 0, CAN2 has 
  52:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * to use.
  53:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  */
  54:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** #define CANARD_STM32_NUM_ACCEPTANCE_FILTERS                            14U
  55:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
  56:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** /**
  57:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * The interface can be initialized in either of these modes.
  58:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  *
  59:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * The Silent mode is useful for automatic CAN bit rate detection, where the interface is initializ
  60:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * arbitrarily guessed CAN bit rate (typically either 1 Mbps, 500 Kbps, 250 Kbps, or 125 Kbps, thes
  61:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * standard values defined by the UAVCAN specification), and the bus is then listened for 1 second 
  62:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * determine whether the bit rate was guessed correctly. It is paramount to use the silent mode in 
  63:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * as to not interfere with ongoing communications on the bus if the guess was incorrect.
  64:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  *
  65:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * The automatic TX abort on error mode should be used during dynamic node ID allocation. The reaso
  66:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * is well explained in the UAVCAN specification, please read it.
  67:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  *
  68:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * The normal mode should be used for all other use cases, particularly for the normal operation of
  69:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * hence the name.
  70:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  */
  71:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** typedef enum
  72:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** {
  73:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     CanardSTM32IfaceModeNormal,                         //!< Normal mode
  74:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     CanardSTM32IfaceModeSilent,                         //!< Do not affect the bus, only listen
  75:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     CanardSTM32IfaceModeAutomaticTxAbortOnError         //!< Abort pending TX if a bus error has oc
  76:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** } CanardSTM32IfaceMode;
  77:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
  78:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** /**
  79:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * Interface statistics; these values can be queried using a dedicated API call.
  80:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  */
  81:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** typedef struct
  82:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** {
  83:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     uint64_t rx_overflow_count;
  84:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     uint64_t error_count;
  85:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** } CanardSTM32Stats;
  86:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
  87:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** /**
  88:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * ID and Mask of a hardware acceptance filter.
  89:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * The ID and Mask fields support flags @ref CANARD_CAN_FRAME_EFF and @ref CANARD_CAN_FRAME_RTR.
  90:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  */
  91:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** typedef struct
  92:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** {
  93:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     uint32_t id;
  94:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     uint32_t mask;
  95:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** } CanardSTM32AcceptanceFilterConfiguration;
  96:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
  97:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** /**
  98:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * These parameters define the timings of the CAN controller.
  99:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * Please refer to the documentation of the bxCAN macrocell for explanation.
 100:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * These values can be computed by the developed beforehand if ROM size is of a concern,
 101:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * or they can be computed at run time using the function defined below.
 102:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  */
 103:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** typedef struct
 104:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** {
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 27


 105:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     uint16_t bit_rate_prescaler;                        /// [1, 1024]
 106:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     uint8_t bit_segment_1;                              /// [1, 16]
 107:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     uint8_t bit_segment_2;                              /// [1, 8]
 108:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     uint8_t max_resynchronization_jump_width;           /// [1, 4] (recommended value is 1)
 109:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** } CanardSTM32CANTimings;
 110:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
 111:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** /**
 112:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * Initializes the CAN controller at the specified bit rate.
 113:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * The mode can be either normal, silent, or auto-abort on error;
 114:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * in silent mode the controller will be only listening, not affecting the state of the bus;
 115:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * in the auto abort mode the controller will cancel the pending transmissions if a bus error is en
 116:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * The auto abort mode is needed for dynamic node ID allocation procedure; please refer to the UAVC
 117:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * for more information about this topic.
 118:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  *
 119:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * This function can be invoked any number of times; every invocation re-initializes everything fro
 120:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  *
 121:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * WARNING: The clock of the CAN module must be enabled before this function is invoked!
 122:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  *          If CAN2 is used, CAN1 must be also enabled!
 123:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  *
 124:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * WARNING: The driver is not thread-safe!
 125:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  *          It does not use IRQ or critical sections though, so it is safe to invoke its API functi
 126:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  *          IRQ context from the application.
 127:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  *
 128:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * @retval      0               Success
 129:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * @retval      negative        Error
 130:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  */
 131:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** int16_t canardSTM32Init(const CanardSTM32CANTimings* const timings,
 132:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****                         const CanardSTM32IfaceMode iface_mode);
 133:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
 134:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** /**
 135:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * Pushes one frame into the TX buffer, if there is space.
 136:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * Note that proper care is taken to ensure that no inner priority inversion is taking place.
 137:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * This function does never block.
 138:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  *
 139:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * @retval      1               Transmitted successfully
 140:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * @retval      0               No space in the buffer
 141:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * @retval      negative        Error
 142:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  */
 143:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** int16_t canardSTM32Transmit(const CanardCANFrame* const frame);
 144:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
 145:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** /**
 146:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * Reads one frame from the hardware RX FIFO, unless all FIFO are empty.
 147:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * This function does never block.
 148:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  *
 149:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * @retval      1               Read successfully
 150:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * @retval      0               The buffer is empty
 151:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * @retval      negative        Error
 152:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  */
 153:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** int16_t canardSTM32Receive(CanardCANFrame* const out_frame);
 154:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
 155:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** /**
 156:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * Sets up acceptance filters according to the provided list of ID and masks.
 157:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * Note that when the interface is reinitialized, hardware acceptance filters are reset.
 158:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * Also note that during filter reconfiguration, some RX frames may be lost.
 159:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  *
 160:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * Setting zero filters will result in rejection of all frames.
 161:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * In order to accept all frames, set one filter with ID = Mask = 0, which is also the default conf
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 28


 162:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  *
 163:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * @retval      0               Success
 164:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * @retval      negative        Error
 165:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  */
 166:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** int16_t canardSTM32ConfigureAcceptanceFilters(const CanardSTM32AcceptanceFilterConfiguration* const
 167:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****                                               const uint8_t num_filter_configs);
 168:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
 169:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** /**
 170:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * Returns the running interface statistics.
 171:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  */
 172:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** CanardSTM32Stats canardSTM32GetStats(void);
 173:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
 174:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** /**
 175:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * Given the rate of the clock supplied to the bxCAN macrocell (typically PCLK1) and the desired bi
 176:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * this function iteratively solves for the best possible timing settings. The CAN bus timing param
 177:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * such as the sample point location, the number of time quantas per bit, etc., are optimized accor
 178:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * recommendations provided in the specifications of UAVCAN, DeviceNet, and CANOpen.
 179:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  *
 180:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * Unless noted otherwise, all units are SI units; particularly, frequency is specified in hertz.
 181:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  *
 182:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * The implementation is adapted from libuavcan.
 183:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  *
 184:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * This function is defined in the header in order to encourage the linker to discard it if it is n
 185:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  *
 186:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * @retval 0            Success
 187:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  * @retval negative     Solution could not be found for the provided inputs.
 188:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****  */
 189:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** static inline
 190:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** int16_t canardSTM32ComputeCANTimings(const uint32_t peripheral_clock_rate,
 191:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****                                      const uint32_t target_bitrate,
 192:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****                                      CanardSTM32CANTimings* const out_timings)
 193:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** {
 194:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     if (target_bitrate < 1000)
 195:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     {
 196:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****         return -CANARD_STM32_ERROR_UNSUPPORTED_BIT_RATE;
 197:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     }
 198:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
 199:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     CANARD_ASSERT(out_timings != NULL);  // NOLINT
 200:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     memset(out_timings, 0, sizeof(*out_timings));
 1002              		.loc 2 200 0
 1003 0022 0023     		movs	r3, #0
 1004 0024 0293     		str	r3, [sp, #8]
 1005 0026 ADF80C30 		strh	r3, [sp, #12]	@ movhi
 201:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
 202:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     /*
 203:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      * Hardware configuration
 204:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      */
 205:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     static const uint8_t MaxBS1 = 16;
 206:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     static const uint8_t MaxBS2 = 8;
 207:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
 208:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     /*
 209:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      * Ref. "Automatic Baudrate Detection in CANopen Networks", U. Koppe, MicroControl GmbH & Co. K
 210:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *      CAN in Automation, 2003
 211:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *
 212:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      * According to the source, optimal quanta per bit are:
 213:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *   Bitrate        Optimal Maximum
 214:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *   1000 kbps      8       10
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 29


 215:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *   500  kbps      16      17
 216:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *   250  kbps      16      17
 217:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *   125  kbps      16      17
 218:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      */
 219:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     const uint8_t max_quanta_per_bit = (uint8_t)((target_bitrate >= 1000000) ? 10 : 17);    // NOLI
 220:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     CANARD_ASSERT(max_quanta_per_bit <= (MaxBS1 + MaxBS2));
 221:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
 222:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     static const uint16_t MaxSamplePointLocationPermill = 900;
 223:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
 224:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     /*
 225:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      * Computing (prescaler * BS):
 226:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *   BITRATE = 1 / (PRESCALER * (1 / PCLK) * (1 + BS1 + BS2))       -- See the Reference Manual
 227:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *   BITRATE = PCLK / (PRESCALER * (1 + BS1 + BS2))                 -- Simplified
 228:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      * let:
 229:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *   BS = 1 + BS1 + BS2                                             -- Number of time quanta pe
 230:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *   PRESCALER_BS = PRESCALER * BS
 231:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      * ==>
 232:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *   PRESCALER_BS = PCLK / BITRATE
 233:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      */
 234:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     const uint32_t prescaler_bs = peripheral_clock_rate / target_bitrate;
 1006              		.loc 2 234 0
 1007 002a A4F19C64 		sub	r4, r4, #81788928
 1008 002e A4F58424 		sub	r4, r4, #270336
 1009 0032 A4F27D54 		subw	r4, r4, #1405
 1010 0036 A4FB0034 		umull	r3, r4, r4, r0
 1011 003a A40C     		lsrs	r4, r4, #18
 1012              	.LVL113:
 235:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
 236:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     /*
 237:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      * Searching for such prescaler value so that the number of quanta per bit is highest.
 238:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      */
 239:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     uint8_t bs1_bs2_sum = (uint8_t)(max_quanta_per_bit - 1);    // NOLINT
 1013              		.loc 2 239 0
 1014 003c 0923     		movs	r3, #9
 1015              	.LVL114:
 1016              	.L69:
 240:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
 241:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     while ((prescaler_bs % (1U + bs1_bs2_sum)) != 0)
 1017              		.loc 2 241 0
 1018 003e 591C     		adds	r1, r3, #1
 1019 0040 B4FBF1F2 		udiv	r2, r4, r1
 1020 0044 01FB1242 		mls	r2, r1, r2, r4
 1021 0048 22B1     		cbz	r2, .L83
 242:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     {
 243:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****         if (bs1_bs2_sum <= 2)
 1022              		.loc 2 243 0
 1023 004a 022B     		cmp	r3, #2
 1024 004c 4DD9     		bls	.L70
 244:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****         {
 245:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****             return -CANARD_STM32_ERROR_UNSUPPORTED_BIT_RATE;          // No solution
 246:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****         }
 247:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****         bs1_bs2_sum--;
 1025              		.loc 2 247 0
 1026 004e 013B     		subs	r3, r3, #1
 1027              	.LVL115:
 1028 0050 DBB2     		uxtb	r3, r3
 1029              	.LVL116:
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 30


 1030 0052 F4E7     		b	.L69
 1031              	.L83:
 248:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     }
 249:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
 250:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     const uint32_t prescaler = prescaler_bs / (1U + bs1_bs2_sum);
 1032              		.loc 2 250 0
 1033 0054 B4FBF1F1 		udiv	r1, r4, r1
 1034              	.LVL117:
 251:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     if ((prescaler < 1U) || (prescaler > 1024U))
 1035              		.loc 2 251 0
 1036 0058 4A1E     		subs	r2, r1, #1
 1037 005a B2F5806F 		cmp	r2, #1024
 1038 005e 44D2     		bcs	.L70
 252:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     {
 253:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****         return -CANARD_STM32_ERROR_UNSUPPORTED_BIT_RATE;              // No solution
 254:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     }
 255:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
 256:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     /*
 257:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      * Now we have a constraint: (BS1 + BS2) == bs1_bs2_sum.
 258:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      * We need to find such values so that the sample point is as close as possible to the optimal 
 259:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      * which is 87.5%, which is 7/8.
 260:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *
 261:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *   Solve[(1 + bs1)/(1 + bs1 + bs2) == 7/8, bs2]  (* Where 7/8 is 0.875, the recommended sampl
 262:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *   {{bs2 -> (1 + bs1)/7}}
 263:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *
 264:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      * Hence:
 265:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *   bs2 = (1 + bs1) / 7
 266:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *   bs1 = (7 * bs1_bs2_sum - 1) / 8
 267:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *
 268:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      * Sample point location can be computed as follows:
 269:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *   Sample point location = (1 + bs1) / (1 + bs1 + bs2)
 270:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *
 271:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      * Since the optimal solution is so close to the maximum, we prepare two solutions, and then pi
 272:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *   - With rounding to nearest
 273:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *   - With rounding to zero
 274:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      */
 275:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     uint8_t bs1 = (uint8_t)(((7 * bs1_bs2_sum - 1) + 4) / 8);       // Trying rounding to nearest f
 1039              		.loc 2 275 0
 1040 0060 C3EBC306 		rsb	r6, r3, r3, lsl #3
 1041 0064 F21C     		adds	r2, r6, #3
 1042 0066 22D4     		bmi	.L84
 1043              	.L72:
 1044 0068 D210     		asrs	r2, r2, #3
 1045 006a D5B2     		uxtb	r5, r2
 1046              	.LVL118:
 276:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     uint8_t bs2 = (uint8_t)(bs1_bs2_sum - bs1);  // NOLINT
 1047              		.loc 2 276 0
 1048 006c 5F1B     		subs	r7, r3, r5
 1049 006e FFB2     		uxtb	r7, r7
 1050              	.LVL119:
 277:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     CANARD_ASSERT(bs1_bs2_sum > bs1);
 1051              		.loc 2 277 0
 1052 0070 AB42     		cmp	r3, r5
 1053 0072 1ED9     		bls	.L85
 1054              	.LBB12:
 278:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
 279:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     {
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 31


 280:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****         const uint16_t sample_point_permill = (uint16_t)(1000U * (1U + bs1) / (1U + bs1 + bs2));  /
 1055              		.loc 2 280 0
 1056 0074 D2B2     		uxtb	r2, r2
 1057 0076 4FF47A74 		mov	r4, #1000
 1058              	.LVL120:
 1059 007a 02FB0444 		mla	r4, r2, r4, r4
 1060 007e 3A44     		add	r2, r2, r7
 1061 0080 0132     		adds	r2, r2, #1
 1062 0082 B4FBF2F2 		udiv	r2, r4, r2
 1063 0086 92B2     		uxth	r2, r2
 1064              	.LVL121:
 281:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
 282:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****         if (sample_point_permill > MaxSamplePointLocationPermill)   // Strictly more!
 1065              		.loc 2 282 0
 1066 0088 B2F5617F 		cmp	r2, #900
 1067 008c 05D9     		bls	.L74
 283:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****         {
 284:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****             bs1 = (uint8_t)((7 * bs1_bs2_sum - 1) / 8);             // Nope, too far; now rounding 
 1068              		.loc 2 284 0
 1069 008e 751E     		subs	r5, r6, #1
 1070              	.LVL122:
 1071 0090 16D4     		bmi	.L86
 1072              	.L75:
 1073 0092 C5F3C705 		ubfx	r5, r5, #3, #8
 1074              	.LVL123:
 285:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****             bs2 = (uint8_t)(bs1_bs2_sum - bs1);
 1075              		.loc 2 285 0
 1076 0096 5B1B     		subs	r3, r3, r5
 1077              	.LVL124:
 1078 0098 DFB2     		uxtb	r7, r3
 1079              	.LVL125:
 1080              	.L74:
 1081              	.LBE12:
 286:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****         }
 287:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     }
 288:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
 289:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     const bool valid = (bs1 >= 1) && (bs1 <= MaxBS1) && (bs2 >= 1) && (bs2 <= MaxBS2);
 1082              		.loc 2 289 0
 1083 009a 6B1E     		subs	r3, r5, #1
 1084 009c DBB2     		uxtb	r3, r3
 1085 009e 0F2B     		cmp	r3, #15
 1086 00a0 10D8     		bhi	.L79
 1087 00a2 002F     		cmp	r7, #0
 1088 00a4 3BD0     		beq	.L80
 1089 00a6 082F     		cmp	r7, #8
 1090 00a8 3BD9     		bls	.L81
 1091 00aa 0022     		movs	r2, #0
 1092              	.LVL126:
 1093 00ac 0BE0     		b	.L76
 1094              	.LVL127:
 1095              	.L84:
 275:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     uint8_t bs2 = (uint8_t)(bs1_bs2_sum - bs1);  // NOLINT
 1096              		.loc 2 275 0
 1097 00ae 0732     		adds	r2, r2, #7
 1098 00b0 DAE7     		b	.L72
 1099              	.LVL128:
 1100              	.L85:
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 32


 277:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
 1101              		.loc 2 277 0
 1102 00b2 214B     		ldr	r3, .L87+4
 1103              	.LVL129:
 1104 00b4 214A     		ldr	r2, .L87+8
 1105 00b6 40F21511 		movw	r1, #277
 1106              	.LVL130:
 1107 00ba 2148     		ldr	r0, .L87+12
 1108              	.LVL131:
 1109 00bc FFF7FEFF 		bl	__assert_func
 1110              	.LVL132:
 1111              	.L86:
 1112              	.LBB13:
 284:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****             bs2 = (uint8_t)(bs1_bs2_sum - bs1);
 1113              		.loc 2 284 0
 1114 00c0 0735     		adds	r5, r5, #7
 1115 00c2 E6E7     		b	.L75
 1116              	.LVL133:
 1117              	.L79:
 1118              	.LBE13:
 1119              		.loc 2 289 0
 1120 00c4 0022     		movs	r2, #0
 1121              	.LVL134:
 1122              	.L76:
 290:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
 291:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     /*
 292:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      * Final validation
 293:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      * Helpful Python:
 294:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      * def sample_point_from_btr(x):
 295:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *     assert 0b0011110010000000111111000000000 & x == 0
 296:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *     ts2,ts1,brp = (x>>20)&7, (x>>16)&15, x&511
 297:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      *     return (1+ts1+1)/(1+ts1+1+ts2+1)
 298:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****      */
 299:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     if ((target_bitrate != (peripheral_clock_rate / (prescaler * (1U + bs1 + bs2)))) ||
 1123              		.loc 2 299 0
 1124 00c6 EB19     		adds	r3, r5, r7
 1125 00c8 03FB0113 		mla	r3, r3, r1, r1
 1126 00cc B0FBF3F0 		udiv	r0, r0, r3
 1127              	.LVL135:
 1128 00d0 1C4B     		ldr	r3, .L87+16
 1129 00d2 9842     		cmp	r0, r3
 1130 00d4 27D1     		bne	.L77
 1131 00d6 32B3     		cbz	r2, .L77
 300:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****         !valid)
 301:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     {
 302:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****         // This actually means that the algorithm has a logic error, hence assert(0).
 303:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****         CANARD_ASSERT(0);  // NOLINT
 304:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****         return -CANARD_STM32_ERROR_UNSUPPORTED_BIT_RATE;
 305:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     }
 306:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
 307:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     out_timings->bit_rate_prescaler = (uint16_t) prescaler;
 1132              		.loc 2 307 0
 1133 00d8 ADF80810 		strh	r1, [sp, #8]	@ movhi
 308:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     out_timings->max_resynchronization_jump_width = 1;      // One is recommended by UAVCAN, CANOpe
 1134              		.loc 2 308 0
 1135 00dc 0123     		movs	r3, #1
 1136 00de 8DF80C30 		strb	r3, [sp, #12]
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 33


 309:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     out_timings->bit_segment_1 = bs1;
 1137              		.loc 2 309 0
 1138 00e2 8DF80A50 		strb	r5, [sp, #10]
 310:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****     out_timings->bit_segment_2 = bs2;
 1139              		.loc 2 310 0
 1140 00e6 8DF80B70 		strb	r7, [sp, #11]
 1141              	.LVL136:
 1142              	.L70:
 1143              	.LBE11:
 1144              	.LBE10:
 294:Src/oi_uavcan.c ****   if (result)
 295:Src/oi_uavcan.c ****   {
 296:Src/oi_uavcan.c ****       //__ASM volatile("BKPT #01");
 297:Src/oi_uavcan.c ****   }
 298:Src/oi_uavcan.c **** 
 299:Src/oi_uavcan.c ****   canardSTM32Init(&timings, CanardSTM32IfaceModeNormal);
 1145              		.loc 1 299 0
 1146 00ea 0021     		movs	r1, #0
 1147 00ec 02A8     		add	r0, sp, #8
 1148 00ee FFF7FEFF 		bl	canardSTM32Init
 1149              	.LVL137:
 300:Src/oi_uavcan.c ****   result = canardSTM32Init(&timings, CanardSTM32IfaceModeNormal);
 1150              		.loc 1 300 0
 1151 00f2 0021     		movs	r1, #0
 1152 00f4 02A8     		add	r0, sp, #8
 1153 00f6 FFF7FEFF 		bl	canardSTM32Init
 1154              	.LVL138:
 301:Src/oi_uavcan.c **** 
 302:Src/oi_uavcan.c ****   canardInit(&g_canard,                         // Uninitialized library instance
 1155              		.loc 1 302 0
 1156 00fa 134C     		ldr	r4, .L87+20
 1157 00fc 0023     		movs	r3, #0
 1158 00fe 0193     		str	r3, [sp, #4]
 1159 0100 124B     		ldr	r3, .L87+24
 1160 0102 0093     		str	r3, [sp]
 1161 0104 124B     		ldr	r3, .L87+28
 1162 0106 4FF48062 		mov	r2, #1024
 1163 010a 1249     		ldr	r1, .L87+32
 1164 010c 2046     		mov	r0, r4
 1165 010e FFF7FEFF 		bl	canardInit
 1166              	.LVL139:
 303:Src/oi_uavcan.c ****              g_canard_memory_pool,              // Raw memory chunk used for dynamic allocation
 304:Src/oi_uavcan.c ****              sizeof(g_canard_memory_pool),      // Size of the above, in bytes
 305:Src/oi_uavcan.c ****              onTransferReceived,                // Callback, see CanardOnTransferReception
 306:Src/oi_uavcan.c ****              shouldAcceptTransfer,              // Callback, see CanardShouldAcceptTransfer
 307:Src/oi_uavcan.c ****              NULL);
 308:Src/oi_uavcan.c **** 
 309:Src/oi_uavcan.c ****   canardSetLocalNodeID(&g_canard, UAVCAN_NODE_ID);
 1167              		.loc 1 309 0
 1168 0112 6F21     		movs	r1, #111
 1169 0114 2046     		mov	r0, r4
 1170 0116 FFF7FEFF 		bl	canardSetLocalNodeID
 1171              	.LVL140:
 310:Src/oi_uavcan.c **** }
 1172              		.loc 1 310 0
 1173 011a 05B0     		add	sp, sp, #20
 1174              	.LCFI21:
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 34


 1175              		.cfi_remember_state
 1176              		.cfi_def_cfa_offset 20
 1177              		@ sp needed
 1178 011c F0BD     		pop	{r4, r5, r6, r7, pc}
 1179              	.LVL141:
 1180              	.L80:
 1181              	.LCFI22:
 1182              		.cfi_restore_state
 1183              	.LBB15:
 1184              	.LBB14:
 289:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h **** 
 1185              		.loc 2 289 0
 1186 011e 0022     		movs	r2, #0
 1187              	.LVL142:
 1188 0120 D1E7     		b	.L76
 1189              	.LVL143:
 1190              	.L81:
 1191 0122 0122     		movs	r2, #1
 1192              	.LVL144:
 1193 0124 CFE7     		b	.L76
 1194              	.LVL145:
 1195              	.L77:
 303:Middlewares/Third_Party/libcanard/drivers/stm32/canard_stm32.h ****         return -CANARD_STM32_ERROR_UNSUPPORTED_BIT_RATE;
 1196              		.loc 2 303 0
 1197 0126 0C4B     		ldr	r3, .L87+36
 1198 0128 044A     		ldr	r2, .L87+8
 1199              	.LVL146:
 1200 012a 40F22F11 		movw	r1, #303
 1201              	.LVL147:
 1202 012e 0448     		ldr	r0, .L87+12
 1203 0130 FFF7FEFF 		bl	__assert_func
 1204              	.LVL148:
 1205              	.L88:
 1206              		.align	2
 1207              	.L87:
 1208 0134 00040048 		.word	1207960576
 1209 0138 00000000 		.word	.LC1
 1210 013c 00000000 		.word	.LANCHOR3
 1211 0140 14000000 		.word	.LC2
 1212 0144 40420F00 		.word	1000000
 1213 0148 00000000 		.word	.LANCHOR1
 1214 014c 00000000 		.word	shouldAcceptTransfer
 1215 0150 00000000 		.word	onTransferReceived
 1216 0154 00000000 		.word	.LANCHOR4
 1217 0158 54000000 		.word	.LC3
 1218              	.LBE14:
 1219              	.LBE15:
 1220              		.cfi_endproc
 1221              	.LFE142:
 1223              		.section	.text.oi_uavcan_spinCanard,"ax",%progbits
 1224              		.align	1
 1225              		.global	oi_uavcan_spinCanard
 1226              		.syntax unified
 1227              		.thumb
 1228              		.thumb_func
 1229              		.fpu fpv4-sp-d16
 1231              	oi_uavcan_spinCanard:
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 35


 1232              	.LFB143:
 311:Src/oi_uavcan.c **** 
 312:Src/oi_uavcan.c **** void oi_uavcan_spinCanard(uint32_t time)
 313:Src/oi_uavcan.c **** {
 1233              		.loc 1 313 0
 1234              		.cfi_startproc
 1235              		@ args = 0, pretend = 0, frame = 8
 1236              		@ frame_needed = 0, uses_anonymous_args = 0
 1237              	.LVL149:
 314:Src/oi_uavcan.c ****   g_uptime = time;
 1238              		.loc 1 314 0
 1239 0000 134B     		ldr	r3, .L97+8
 1240 0002 1860     		str	r0, [r3]
 315:Src/oi_uavcan.c **** 
 316:Src/oi_uavcan.c **** 	static uint32_t spin_time = 0;
 317:Src/oi_uavcan.c ****   if (time < spin_time + CANARD_SPIN_PERIOD) {
 1241              		.loc 1 317 0
 1242 0004 134B     		ldr	r3, .L97+12
 1243 0006 1B68     		ldr	r3, [r3]
 1244 0008 03F57A73 		add	r3, r3, #1000
 1245 000c 8342     		cmp	r3, r0
 1246 000e 00D9     		bls	.L96
 1247 0010 7047     		bx	lr
 1248              	.L96:
 313:Src/oi_uavcan.c ****   g_uptime = time;
 1249              		.loc 1 313 0
 1250 0012 10B5     		push	{r4, lr}
 1251              	.LCFI23:
 1252              		.cfi_def_cfa_offset 8
 1253              		.cfi_offset 4, -8
 1254              		.cfi_offset 14, -4
 1255 0014 88B0     		sub	sp, sp, #32
 1256              	.LCFI24:
 1257              		.cfi_def_cfa_offset 40
 318:Src/oi_uavcan.c **** 	return;
 319:Src/oi_uavcan.c ****   }  // rate limiting
 320:Src/oi_uavcan.c **** 
 321:Src/oi_uavcan.c ****   spin_time = time;
 1258              		.loc 1 321 0
 1259 0016 0F4B     		ldr	r3, .L97+12
 1260 0018 1860     		str	r0, [r3]
 322:Src/oi_uavcan.c **** 
 323:Src/oi_uavcan.c ****   uint8_t buffer[UAVCAN_NODE_STATUS_MESSAGE_SIZE];
 324:Src/oi_uavcan.c ****   static uint8_t transfer_id = 0;                          // This variable MUST BE STATIC; refer t
 325:Src/oi_uavcan.c **** 
 326:Src/oi_uavcan.c ****   makeNodeStatusMessage(buffer);
 1261              		.loc 1 326 0
 1262 001a 06AC     		add	r4, sp, #24
 1263 001c 2046     		mov	r0, r4
 1264              	.LVL150:
 1265 001e FFF7FEFF 		bl	makeNodeStatusMessage
 1266              	.LVL151:
 327:Src/oi_uavcan.c **** 
 328:Src/oi_uavcan.c ****   canardBroadcast(&g_canard,
 1267              		.loc 1 328 0
 1268 0022 0723     		movs	r3, #7
 1269 0024 0493     		str	r3, [sp, #16]
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 36


 1270 0026 0394     		str	r4, [sp, #12]
 1271 0028 1823     		movs	r3, #24
 1272 002a 0293     		str	r3, [sp, #8]
 1273 002c 0A4B     		ldr	r3, .L97+16
 1274 002e 0193     		str	r3, [sp, #4]
 1275 0030 40F25513 		movw	r3, #341
 1276 0034 0093     		str	r3, [sp]
 1277 0036 04A3     		adr	r3, .L97
 1278 0038 D3E90023 		ldrd	r2, [r3]
 1279 003c 0748     		ldr	r0, .L97+20
 1280 003e FFF7FEFF 		bl	canardBroadcast
 1281              	.LVL152:
 329:Src/oi_uavcan.c ****                     UAVCAN_NODE_STATUS_DATA_TYPE_SIGNATURE,
 330:Src/oi_uavcan.c ****                     UAVCAN_NODE_STATUS_DATA_TYPE_ID,
 331:Src/oi_uavcan.c ****                     &transfer_id,
 332:Src/oi_uavcan.c ****                     CANARD_TRANSFER_PRIORITY_LOW,
 333:Src/oi_uavcan.c ****                     buffer,
 334:Src/oi_uavcan.c ****                     UAVCAN_NODE_STATUS_MESSAGE_SIZE);
 335:Src/oi_uavcan.c **** }
 1282              		.loc 1 335 0
 1283 0042 08B0     		add	sp, sp, #32
 1284              	.LCFI25:
 1285              		.cfi_def_cfa_offset 8
 1286              		@ sp needed
 1287 0044 10BD     		pop	{r4, pc}
 1288              	.L98:
 1289 0046 00BF     		.align	3
 1290              	.L97:
 1291 0048 F1C6A7C1 		.word	-1045969167
 1292 004c D068080F 		.word	252209360
 1293 0050 00000000 		.word	.LANCHOR0
 1294 0054 00000000 		.word	.LANCHOR5
 1295 0058 00000000 		.word	.LANCHOR6
 1296 005c 00000000 		.word	.LANCHOR1
 1297              		.cfi_endproc
 1298              	.LFE143:
 1300              		.section	.text.oi_uavcan_sendCanard,"ax",%progbits
 1301              		.align	1
 1302              		.global	oi_uavcan_sendCanard
 1303              		.syntax unified
 1304              		.thumb
 1305              		.thumb_func
 1306              		.fpu fpv4-sp-d16
 1308              	oi_uavcan_sendCanard:
 1309              	.LFB144:
 336:Src/oi_uavcan.c **** 
 337:Src/oi_uavcan.c **** 
 338:Src/oi_uavcan.c **** void oi_uavcan_sendCanard(void)
 339:Src/oi_uavcan.c **** {
 1310              		.loc 1 339 0
 1311              		.cfi_startproc
 1312              		@ args = 0, pretend = 0, frame = 0
 1313              		@ frame_needed = 0, uses_anonymous_args = 0
 1314 0000 08B5     		push	{r3, lr}
 1315              	.LCFI26:
 1316              		.cfi_def_cfa_offset 8
 1317              		.cfi_offset 3, -8
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 37


 1318              		.cfi_offset 14, -4
 340:Src/oi_uavcan.c ****    const CanardCANFrame* txf = canardPeekTxQueue(&g_canard);
 1319              		.loc 1 340 0
 1320 0002 0848     		ldr	r0, .L105
 1321 0004 FFF7FEFF 		bl	canardPeekTxQueue
 1322              	.LVL153:
 341:Src/oi_uavcan.c ****    while(txf)
 1323              		.loc 1 341 0
 1324 0008 02E0     		b	.L100
 1325              	.LVL154:
 1326              	.L101:
 1327              	.LBB16:
 342:Src/oi_uavcan.c ****    {
 343:Src/oi_uavcan.c ****        const int tx_res = canardSTM32Transmit(txf);
 344:Src/oi_uavcan.c ****        if(tx_res > 0){
 345:Src/oi_uavcan.c ****            canardPopTxQueue(&g_canard);
 346:Src/oi_uavcan.c ****        }
 347:Src/oi_uavcan.c **** 
 348:Src/oi_uavcan.c ****        txf = canardPeekTxQueue(&g_canard);
 1328              		.loc 1 348 0
 1329 000a 0648     		ldr	r0, .L105
 1330 000c FFF7FEFF 		bl	canardPeekTxQueue
 1331              	.LVL155:
 1332              	.L100:
 1333              	.LBE16:
 341:Src/oi_uavcan.c ****    while(txf)
 1334              		.loc 1 341 0
 1335 0010 38B1     		cbz	r0, .L104
 1336              	.LBB17:
 343:Src/oi_uavcan.c ****        if(tx_res > 0){
 1337              		.loc 1 343 0
 1338 0012 FFF7FEFF 		bl	canardSTM32Transmit
 1339              	.LVL156:
 344:Src/oi_uavcan.c ****            canardPopTxQueue(&g_canard);
 1340              		.loc 1 344 0
 1341 0016 0028     		cmp	r0, #0
 1342 0018 F7DD     		ble	.L101
 345:Src/oi_uavcan.c ****        }
 1343              		.loc 1 345 0
 1344 001a 0248     		ldr	r0, .L105
 1345              	.LVL157:
 1346 001c FFF7FEFF 		bl	canardPopTxQueue
 1347              	.LVL158:
 1348 0020 F3E7     		b	.L101
 1349              	.LVL159:
 1350              	.L104:
 1351              	.LBE17:
 349:Src/oi_uavcan.c ****    }
 350:Src/oi_uavcan.c **** }
 1352              		.loc 1 350 0
 1353 0022 08BD     		pop	{r3, pc}
 1354              	.L106:
 1355              		.align	2
 1356              	.L105:
 1357 0024 00000000 		.word	.LANCHOR1
 1358              		.cfi_endproc
 1359              	.LFE144:
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 38


 1361              		.section	.text.oi_uavcan_receiveCanard,"ax",%progbits
 1362              		.align	1
 1363              		.global	oi_uavcan_receiveCanard
 1364              		.syntax unified
 1365              		.thumb
 1366              		.thumb_func
 1367              		.fpu fpv4-sp-d16
 1369              	oi_uavcan_receiveCanard:
 1370              	.LFB145:
 351:Src/oi_uavcan.c **** 
 352:Src/oi_uavcan.c **** 
 353:Src/oi_uavcan.c **** void oi_uavcan_receiveCanard(void)
 354:Src/oi_uavcan.c **** {
 1371              		.loc 1 354 0
 1372              		.cfi_startproc
 1373              		@ args = 0, pretend = 0, frame = 16
 1374              		@ frame_needed = 0, uses_anonymous_args = 0
 1375 0000 00B5     		push	{lr}
 1376              	.LCFI27:
 1377              		.cfi_def_cfa_offset 4
 1378              		.cfi_offset 14, -4
 1379 0002 85B0     		sub	sp, sp, #20
 1380              	.LCFI28:
 1381              		.cfi_def_cfa_offset 24
 355:Src/oi_uavcan.c ****    CanardCANFrame rx_frame;
 356:Src/oi_uavcan.c ****    int res = canardSTM32Receive(&rx_frame);
 1382              		.loc 1 356 0
 1383 0004 6846     		mov	r0, sp
 1384 0006 FFF7FEFF 		bl	canardSTM32Receive
 1385              	.LVL160:
 357:Src/oi_uavcan.c ****    if(res){
 1386              		.loc 1 357 0
 1387 000a 10B9     		cbnz	r0, .L110
 1388              	.LVL161:
 1389              	.L107:
 358:Src/oi_uavcan.c ****      canardHandleRxFrame(&g_canard, &rx_frame, g_uptime * 1000);
 359:Src/oi_uavcan.c ****    }
 360:Src/oi_uavcan.c **** }
 1390              		.loc 1 360 0
 1391 000c 05B0     		add	sp, sp, #20
 1392              	.LCFI29:
 1393              		.cfi_remember_state
 1394              		.cfi_def_cfa_offset 4
 1395              		@ sp needed
 1396 000e 5DF804FB 		ldr	pc, [sp], #4
 1397              	.LVL162:
 1398              	.L110:
 1399              	.LCFI30:
 1400              		.cfi_restore_state
 358:Src/oi_uavcan.c ****      canardHandleRxFrame(&g_canard, &rx_frame, g_uptime * 1000);
 1401              		.loc 1 358 0
 1402 0012 064B     		ldr	r3, .L111
 1403 0014 1B68     		ldr	r3, [r3]
 1404 0016 4FF47A72 		mov	r2, #1000
 1405 001a 02FB03F2 		mul	r2, r2, r3
 1406 001e 0023     		movs	r3, #0
 1407 0020 6946     		mov	r1, sp
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 39


 1408 0022 0348     		ldr	r0, .L111+4
 1409              	.LVL163:
 1410 0024 FFF7FEFF 		bl	canardHandleRxFrame
 1411              	.LVL164:
 1412              		.loc 1 360 0
 1413 0028 F0E7     		b	.L107
 1414              	.L112:
 1415 002a 00BF     		.align	2
 1416              	.L111:
 1417 002c 00000000 		.word	.LANCHOR0
 1418 0030 00000000 		.word	.LANCHOR1
 1419              		.cfi_endproc
 1420              	.LFE145:
 1422              		.section	.bss.g_canard,"aw",%nobits
 1423              		.align	2
 1424              		.set	.LANCHOR1,. + 0
 1427              	g_canard:
 1428 0000 00000000 		.space	36
 1428      00000000 
 1428      00000000 
 1428      00000000 
 1428      00000000 
 1429              		.section	.bss.g_canard_memory_pool,"aw",%nobits
 1430              		.align	2
 1431              		.set	.LANCHOR4,. + 0
 1434              	g_canard_memory_pool:
 1435 0000 00000000 		.space	1024
 1435      00000000 
 1435      00000000 
 1435      00000000 
 1435      00000000 
 1436              		.section	.bss.g_uptime,"aw",%nobits
 1437              		.align	2
 1438              		.set	.LANCHOR0,. + 0
 1441              	g_uptime:
 1442 0000 00000000 		.space	4
 1443              		.section	.bss.spin_time.10600,"aw",%nobits
 1444              		.align	2
 1445              		.set	.LANCHOR5,. + 0
 1448              	spin_time.10600:
 1449 0000 00000000 		.space	4
 1450              		.section	.bss.transfer_id.10602,"aw",%nobits
 1451              		.set	.LANCHOR6,. + 0
 1454              	transfer_id.10602:
 1455 0000 00       		.space	1
 1456              		.section	.data.parameters,"aw",%progbits
 1457              		.align	3
 1458              		.set	.LANCHOR2,. + 0
 1461              	parameters:
 1462 0000 00000000 		.word	.LC4
 1463 0004 00000000 		.space	4
 1464 0008 00000000 		.word	0
 1465 000c 00000000 		.word	0
 1466 0010 00000000 		.word	0
 1467 0014 00000000 		.word	0
 1468 0018 FF030000 		.word	1023
 1469 001c 00000000 		.word	0
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 40


 1470 0020 00000000 		.word	0
 1471 0024 00000000 		.word	0
 1472              		.section	.rodata.__func__.9757,"a",%progbits
 1473              		.align	2
 1474              		.set	.LANCHOR3,. + 0
 1477              	__func__.9757:
 1478 0000 63616E61 		.ascii	"canardSTM32ComputeCANTimings\000"
 1478      72645354 
 1478      4D333243 
 1478      6F6D7075 
 1478      74654341 
 1479              		.section	.rodata.makeNodeInfoMessage.str1.4,"aMS",%progbits,1
 1480              		.align	2
 1481              	.LC0:
 1482 0000 63682E6F 		.ascii	"ch.octanis.oibus.mosfet-driver-module\000"
 1482      6374616E 
 1482      69732E6F 
 1482      69627573 
 1482      2E6D6F73 
 1483              		.section	.rodata.oi_uavcan_init.str1.4,"aMS",%progbits,1
 1484              		.align	2
 1485              	.LC1:
 1486 0000 6273315F 		.ascii	"bs1_bs2_sum > bs1\000"
 1486      6273325F 
 1486      73756D20 
 1486      3E206273 
 1486      3100
 1487 0012 0000     		.space	2
 1488              	.LC2:
 1489 0014 4D696464 		.ascii	"Middlewares/Third_Party/libcanard/drivers/stm32/can"
 1489      6C657761 
 1489      7265732F 
 1489      54686972 
 1489      645F5061 
 1490 0047 6172645F 		.ascii	"ard_stm32.h\000"
 1490      73746D33 
 1490      322E6800 
 1491 0053 00       		.space	1
 1492              	.LC3:
 1493 0054 3000     		.ascii	"0\000"
 1494              		.section	.rodata.str1.4,"aMS",%progbits,1
 1495              		.align	2
 1496              	.LC4:
 1497 0000 64726976 		.ascii	"drivers\000"
 1497      65727300 
 1498              		.text
 1499              	.Letext0:
 1500              		.file 3 "/usr/local/Cellar/arm-none-eabi-gcc/7-2018-q2-update/gcc/arm-none-eabi/include/machine/_d
 1501              		.file 4 "/usr/local/Cellar/arm-none-eabi-gcc/7-2018-q2-update/gcc/arm-none-eabi/include/sys/_stdin
 1502              		.file 5 "Drivers/CMSIS/Include/core_cm4.h"
 1503              		.file 6 "Drivers/CMSIS/Device/ST/STM32F3xx/Include/system_stm32f3xx.h"
 1504              		.file 7 "Drivers/CMSIS/Device/ST/STM32F3xx/Include/stm32f303xc.h"
 1505              		.file 8 "/usr/local/Cellar/arm-none-eabi-gcc/7-2018-q2-update/gcc/lib/gcc/arm-none-eabi/7.3.1/incl
 1506              		.file 9 "/usr/local/Cellar/arm-none-eabi-gcc/7-2018-q2-update/gcc/arm-none-eabi/include/sys/lock.h
 1507              		.file 10 "/usr/local/Cellar/arm-none-eabi-gcc/7-2018-q2-update/gcc/arm-none-eabi/include/sys/_type
 1508              		.file 11 "/usr/local/Cellar/arm-none-eabi-gcc/7-2018-q2-update/gcc/arm-none-eabi/include/sys/reent
 1509              		.file 12 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_gpio.h"
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 41


 1510              		.file 13 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal.h"
 1511              		.file 14 "Inc/oi_uavcan.h"
 1512              		.file 15 "Middlewares/Third_Party/libcanard/canard.h"
 1513              		.file 16 "/usr/local/Cellar/arm-none-eabi-gcc/7-2018-q2-update/gcc/arm-none-eabi/include/assert.h"
 1514              		.file 17 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_rcc.h"
 1515              		.file 18 "/usr/local/Cellar/arm-none-eabi-gcc/7-2018-q2-update/gcc/arm-none-eabi/include/string.h"
 1516              		.file 19 "<built-in>"
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 42


DEFINED SYMBOLS
                            *ABS*:0000000000000000 oi_uavcan.c
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:18     .text.readUniqueID:0000000000000000 $t
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:24     .text.readUniqueID:0000000000000000 readUniqueID
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:57     .text.shouldAcceptTransfer:0000000000000000 $t
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:63     .text.shouldAcceptTransfer:0000000000000000 shouldAcceptTransfer
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:120    .text.shouldAcceptTransfer:0000000000000038 $d
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:128    .text.makeNodeStatusMessage:0000000000000000 $t
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:134    .text.makeNodeStatusMessage:0000000000000000 makeNodeStatusMessage
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:194    .text.makeNodeStatusMessage:0000000000000050 $d
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:200    .text.makeNodeInfoMessage:0000000000000000 $t
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:206    .text.makeNodeInfoMessage:0000000000000000 makeNodeInfoMessage
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:286    .text.makeNodeInfoMessage:0000000000000064 $d
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:291    .text.getNodeInfoHandleCanard:0000000000000000 $t
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:297    .text.getNodeInfoHandleCanard:0000000000000000 getNodeInfoHandleCanard
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:355    .text.getNodeInfoHandleCanard:0000000000000040 $d
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:362    .text.encodeParamCanard:0000000000000000 $t
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:368    .text.encodeParamCanard:0000000000000000 encodeParamCanard
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:570    .text.oi_uavcan_getParamByIndex:0000000000000000 $t
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:577    .text.oi_uavcan_getParamByIndex:0000000000000000 oi_uavcan_getParamByIndex
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:604    .text.oi_uavcan_getParamByIndex:0000000000000014 $d
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:609    .text.oi_uavcan_getParamByName:0000000000000000 $t
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:616    .text.oi_uavcan_getParamByName:0000000000000000 oi_uavcan_getParamByName
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:680    .text.oi_uavcan_getParamByName:000000000000003c $d
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:686    .text.getsetHandleCanard:0000000000000000 $t
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:692    .text.getsetHandleCanard:0000000000000000 getsetHandleCanard
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:891    .text.getsetHandleCanard:0000000000000108 $d
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:898    .text.onTransferReceived:0000000000000000 $t
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:904    .text.onTransferReceived:0000000000000000 onTransferReceived
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:959    .text.oi_uavcan_init:0000000000000000 $t
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:966    .text.oi_uavcan_init:0000000000000000 oi_uavcan_init
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1208   .text.oi_uavcan_init:0000000000000134 $d
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1224   .text.oi_uavcan_spinCanard:0000000000000000 $t
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1231   .text.oi_uavcan_spinCanard:0000000000000000 oi_uavcan_spinCanard
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1291   .text.oi_uavcan_spinCanard:0000000000000048 $d
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1301   .text.oi_uavcan_sendCanard:0000000000000000 $t
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1308   .text.oi_uavcan_sendCanard:0000000000000000 oi_uavcan_sendCanard
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1357   .text.oi_uavcan_sendCanard:0000000000000024 $d
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1362   .text.oi_uavcan_receiveCanard:0000000000000000 $t
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1369   .text.oi_uavcan_receiveCanard:0000000000000000 oi_uavcan_receiveCanard
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1417   .text.oi_uavcan_receiveCanard:000000000000002c $d
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1423   .bss.g_canard:0000000000000000 $d
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1427   .bss.g_canard:0000000000000000 g_canard
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1430   .bss.g_canard_memory_pool:0000000000000000 $d
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1434   .bss.g_canard_memory_pool:0000000000000000 g_canard_memory_pool
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1437   .bss.g_uptime:0000000000000000 $d
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1441   .bss.g_uptime:0000000000000000 g_uptime
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1444   .bss.spin_time.10600:0000000000000000 $d
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1448   .bss.spin_time.10600:0000000000000000 spin_time.10600
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1454   .bss.transfer_id.10602:0000000000000000 transfer_id.10602
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1455   .bss.transfer_id.10602:0000000000000000 $d
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1457   .data.parameters:0000000000000000 $d
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1461   .data.parameters:0000000000000000 parameters
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1473   .rodata.__func__.9757:0000000000000000 $d
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1477   .rodata.__func__.9757:0000000000000000 __func__.9757
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1480   .rodata.makeNodeInfoMessage.str1.4:0000000000000000 $d
/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1484   .rodata.oi_uavcan_init.str1.4:0000000000000000 $d
ARM GAS  /var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s 			page 43


/var/folders/pr/jy5_dyq97qq9ykqb3p58dhg00000gn/T//cc6xS89b.s:1495   .rodata.str1.4:0000000000000000 $d

UNDEFINED SYMBOLS
canardEncodeScalar
memset
canardRequestOrRespond
strlen
memcpy
strncmp
canardDecodeScalar
HAL_GPIO_WritePin
HAL_RCC_GetPCLK1Freq
__assert_func
canardSTM32Init
canardInit
canardSetLocalNodeID
canardBroadcast
canardPeekTxQueue
canardSTM32Transmit
canardPopTxQueue
canardSTM32Receive
canardHandleRxFrame
